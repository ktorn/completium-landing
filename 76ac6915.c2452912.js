(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{137:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return b})),a.d(t,"default",(function(){return p}));var n=a(3),c=a(7),r=(a(0),a(207)),o=(a(210),a(211)),i=a(208),s={id:"contract",title:"Introduction",sidebar_label:"Introduction",slug:"/contract"},l={unversionedId:"contract/contract",id:"contract/contract",isDocsHomePage:!1,title:"Introduction",description:"A smart contract is a program that is executed by the blockchain. It possesses:",source:"@site/docs/contract/contract1.md",slug:"/contract",permalink:"/docs/contract",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/contract/contract1.md",version:"current",sidebar_label:"Introduction",sidebar:"archetype",next:{title:"Hello Tezos world",permalink:"/docs/contract/tuto/archetype-hello"}},b=[{value:"Micheslon",id:"micheslon",children:[]},{value:"Register languages",id:"register-languages",children:[]},{value:"Archetype",id:"archetype",children:[]},{value:"Formal verification",id:"formal-verification",children:[]}],h={toc:b};function p(e){var t=e.components,a=Object(c.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},h,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"A smart contract is a program that is executed by the blockchain. It possesses:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"an ",Object(r.b)("em",{parentName:"li"},"address")),Object(r.b)("li",{parentName:"ol"},"a ",Object(r.b)("em",{parentName:"li"},"balance")," of currency"),Object(r.b)("li",{parentName:"ol"},"a ",Object(r.b)("em",{parentName:"li"},"storage")," of data"),Object(r.b)("li",{parentName:"ol"},Object(r.b)("em",{parentName:"li"},"entrypoints")," to call and execute the contract's business logic and read/write data")),Object(r.b)("p",null,"The following information is available to the contract's business logic:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"when")," the contract is called"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"who")," the contract is called by"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"how much")," currency is ",Object(r.b)("strong",{parentName:"li"},"transferred")," to the contract"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"how much")," currency the contract ",Object(r.b)("strong",{parentName:"li"},"owns"))),Object(r.b)("p",null,"An amount of currency can by transferred to the contract when calling an entrypoint. The contract can be programmed to send currency to an account or to another contract."),Object(r.b)("p",null,"Interacting with a smart contract has an exectution cost which depends on:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"the complexity of the contract's program"),Object(r.b)("li",{parentName:"ul"},"the size of data it creates"),Object(r.b)("li",{parentName:"ul"},"a constant fee")),Object(r.b)("p",null,"This cost is automatically taken from your account when invoking a contract."),Object(r.b)("p",null,"Note that contract storage, code and transactions (incoming and outcoming) are all ",Object(r.b)("em",{parentName:"p"},"publically")," available."),Object(r.b)("h2",{id:"micheslon"},"Micheslon"),Object(r.b)("p",null,"Michelson is the default language to write smart contracts on the Tezos blockchain. You can find the language reference ",Object(r.b)("a",{href:"https://tezos.gitlab.io/michelson-reference/"},"here"),"."),Object(r.b)("p",null,"Michelson is a ",Object(r.b)("a",{href:"https://en.wikipedia.org/wiki/Stack_machine#:~:text=In%20computer%20science%2C%20computer%20engineering,buffer%2C%20known%20as%20a%20stack%2C",target:"_blank"},"stack machine")," language. Here is an example of a Michelson contract deployed on the mainnet:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-css"}),"parameter (pair (option %admin (list address))\n                (pair (string %oldhash) (string %newhash)));\nstorage (pair (list %admin address) (string %hash));\ncode { { UNPAIR ;\n         UNPAIR ;\n         DIP { UNPAIR @oldhash @newhash } ;\n         DIP { DIP { DIP { UNPAIR @storedadmin @storedhash } } } } ;\n       SWAP ;\n       { DIP { DIP { DIP { SWAP } } } } ;\n       { DIP { DIP { SWAP } } } ;\n       DIP { SWAP } ;\n       { DIP { DIP { DIP { SWAP } } } } ;\n       { DIP { DIP { SWAP ; DUP ; DIP { SWAP } } } } ;\n       ASSERT_CMPEQ ;\n       SENDER ;\n       SWAP ;\n       { DIP { DIP { PUSH @admin bool False } } } ;\n       ITER { DIP { DUP } ; CMPEQ ; SWAP ; DIP { OR @admin } } ;\n       DROP ;\n       ASSERT ;\n       IF_NONE {} { DIP { DROP } } ;\n       NIL operation ;\n       { DIP { PAIR %admin %hash } ; PAIR %op } }\n")),Object(r.b)("p",null,"The contract is available at the address ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://better-call.dev/mainnet/KT1Gbu1Gm2U47Pmq9VP7ZMy3ZLKecodquAh4/code"}),"KT1Gbu1Gm2U47Pmq9VP7ZMy3ZLKecodquAh4")),Object(r.b)("h2",{id:"register-languages"},"Register languages"),Object(r.b)("p",null,"A smart contract is a public object, and as such is required to convey confidence in the business process it implements. It is then suggested to use register languages which make the code easier to read, write and ",Object(r.b)(i.a,{to:"/docs/dapp-tools/tezos#formal-verification",mdxType:"Link"},"verify"),"."),Object(r.b)("p",null,"Several register languages are available and listed ",Object(r.b)("a",{href:"https://tezos.com/developer-portal/#2-write-a-smart-contract"},"here"),". They compile contracts to Michelson."),Object(r.b)("h2",{id:"archetype"},"Archetype"),Object(r.b)("p",null,"In the DApps presented here we are using ",Object(r.b)("a",{href:"https://archetype-lang.org/"},"Archetype"),", a high-level language to develop Smart Contracts on the Tezos blockchain, with all Michelson features, plus exclusive features (new types, state machine design, ...) to ease development, tests and formal verification."),Object(r.b)("p",null,"For example, below is the ",Object(r.b)("a",{href:"https://archetype-lang.org/"},"Archetype")," version of the above contract:"),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype"}),"archetype c3n(admins : list<address>, hash : bytes)\n\nentry register (newadmins : option<list<address>>,\n                oldhash : bytes,\n                newhash : bytes) {\n   require {\n       r1: oldhash = hash;\n       r2: contains(admins, caller);\n   }\n   effect {\n       hash := newhash;\n       match newadmins with\n        | some(nadmins) -> admins := nadmins\n        | none -> ()\n       end\n   }\n}\n")),Object(r.b)("p",null,"Archetype comes with a convenient set of ",Object(r.b)("a",{href:"https://github.com/edukera/try-archetype#smart-contracts-base",target:"_blank"},"contract examples")," to start your project from. Learn the Archetype language with a eight steps online tutorial:"),Object(r.b)(o.a,{url:"https://gitpod.io/#https://github.com/edukera/try-archetype",txt:"try archetype",mdxType:"DappButton"}),Object(r.b)("h2",{id:"formal-verification"},"Formal verification"),Object(r.b)("p",null,"Formal verification is the act of proving or disproving the correctness of intended algorithms underlying a system with respect to a certain formal specification or property, using formal methods of mathematics."),Object(r.b)("p",null,"Formal verification provides maximum decentralized confidence that the smart contract behaves as described in the formal specification."),Object(r.b)("p",null,"The Tezos community provides a rich technical and human eco-system regarding formal verification:"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Tools"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",{href:"https://gitlab.com/nomadic-labs/mi-cho-coq/",target:"_blank"},"Michocoq")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"A specification of Michelson in ",Object(r.b)("a",{href:"https://coq.inria.fr/",target:"_blank"},"Coq")," to prove properties about smart contracts in Tezos.")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("a",{href:"https://archetype-lang.org/"},"Archetype")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Archetype provides a specification language for contract invariant and entry point postconditions. It generates the contract in the ",Object(r.b)("a",{href:"http://why3.lri.fr/",target:"_blank"},"Why3")," language for verification")))))}p.isMDXComponent=!0}}]);