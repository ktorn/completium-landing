(self.webpackChunkcompletium_landing=self.webpackChunkcompletium_landing||[]).push([[3785],{8120:function(t,e,a){"use strict";a.r(e),a.d(e,{frontMatter:function(){return d},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return m},default:function(){return u}});var n=a(2122),l=a(9756),r=(a(7294),a(3905)),i=a(6742),o=["components"],d={id:"cli4",title:"JS library",sidebar_label:"JS library",slug:"/cli/jslibrary"},p=void 0,c={unversionedId:"cli/cli4",id:"cli/cli4",isDocsHomePage:!1,title:"JS library",description:"$completium-cli also comes as a Javascript library to implement test scenarios.",source:"@site/docs/cli/cli4.md",sourceDirName:"cli",slug:"/cli/jslibrary",permalink:"/docs/cli/jslibrary",editUrl:"https://github.com/edukera/completium-landing/tree/master/docs/cli/cli4.md",version:"current",frontMatter:{id:"cli4",title:"JS library",sidebar_label:"JS library",slug:"/cli/jslibrary"},sidebar:"cli",previous:{title:"Contract",permalink:"/docs/cli/contract"}},m=[{value:"deploy / originate",id:"deploy--originate",children:[]},{value:"call",id:"call",children:[]},{value:"transfer",id:"transfer",children:[]},{value:"getBalance",id:"getbalance",children:[]},{value:"getStorage",id:"getstorage",children:[]},{value:"getContract",id:"getcontract",children:[]},{value:"setAccount",id:"setaccount",children:[]},{value:"setEndpoint",id:"setendpoint",children:[]},{value:"getAddress",id:"getaddress",children:[]},{value:"pack",id:"pack",children:[]},{value:"packTyped",id:"packtyped",children:[]},{value:"blake2b",id:"blake2b",children:[]},{value:"setNow",id:"setnow",children:[]}],s={toc:m};function u(t){var e=t.components,a=(0,l.Z)(t,o);return(0,r.kt)("wrapper",(0,n.Z)({},s,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"$completium-cli")," also comes as a Javascript library to implement test scenarios."),(0,r.kt)("p",null,"It provides a subset of commands as programming fnuctions. The benefit is that you can use endpoints and accounts already configured with the CLI, which simplifies the writing of scenarios."),(0,r.kt)("p",null,"An example of test scenario is available ",(0,r.kt)(i.Z,{to:"/docs/contract/test-scenario#example",mdxType:"Link"},"here"),"."),(0,r.kt)("h2",{id:"deploy--originate"},"deploy / originate"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const { deploy } = require('@completium/completium-cli')\n")),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const [mycontract, op] = await deploy('./mycontract.arl', {\n  as: 'admin',\n  parameters: {\n    n: 0,\n    s: 'hello'\n  }\n});\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"mycontract")," is the contract object to call entrypoints (see below).",(0,r.kt)("p",null),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"op")," is the operation object from which to retrieve operation costs for example."),(0,r.kt)("p",null,"The second argument object may have the following entries:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Entry"),(0,r.kt)("th",{parentName:"tr",align:null},"JS type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"as")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Deploys with specified account. Default account is the one returned by command ",(0,r.kt)("inlineCode",{parentName:"td"},"completium-cli show account"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"name")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Names deployed contract with specified logical name. Logical name is used to refer to contract when calling or displaying contract.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"parameters")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"object")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies archetype parameter values (only with archetype contract)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of XTZ to sent when deploying contract.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"metadata-storage")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Adds metadata to contract from json file (only with archetype contract).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"metadata-uri")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Adds metadata to contract from uri (only with archetype contract).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"init")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Overwrites contract initial storage with Michelson value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"test-mode")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"bool")),(0,r.kt)("td",{parentName:"tr",align:null},"Generates entrypoint ",(0,r.kt)("inlineCode",{parentName:"td"},"_set_now")," to set ",(0,r.kt)("inlineCode",{parentName:"td"},"now")," value (only with archetype contract, to be used only on testnet)")))),(0,r.kt)("h2",{id:"call"},"call"),(0,r.kt)("p",null,"Suppose the ",(0,r.kt)("inlineCode",{parentName:"p"},"escrow.arl")," has several entrypoints among wich the ",(0,r.kt)("inlineCode",{parentName:"p"},"deposit")," entrypoint."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const { deploy } = require('@completium/completium-cli');\nconst [escrow, op] = await deploy('./escrow.arl');\nconst op = await escrow.deposit({ amount: '50tz', as: 'admin' });\n")),(0,r.kt)("p",null,"The parameter object may have the following entries:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Entry"),(0,r.kt)("th",{parentName:"tr",align:null},"JS type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"as")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Deploys with specified account. Default account is the one returned by command ",(0,r.kt)("inlineCode",{parentName:"td"},"completium-cli show account"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"arg")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"object")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies entrypoints parameter values (see example below).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"arg-michelson")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Specifies entrypoints parameter values in Michelson format.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"amount")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null},"Amount of XTZ to sent when calling contract.")))),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Note that when there is only one entrypoint, the ",(0,r.kt)("inlineCode",{parentName:"p"},"call")," function must be used."))),(0,r.kt)("p",null," For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"const { deploy, call } = require('@completium/completium-cli');\nconst [escrow, op] = await deploy('./escrow.arl');\nconst op = await call('escrow', { amount: '50tz', as: 'admin' });\n")),(0,r.kt)("h2",{id:"transfer"},"transfer"),(0,r.kt)("h2",{id:"getbalance"},"getBalance"),(0,r.kt)("h2",{id:"getstorage"},"getStorage"),(0,r.kt)("h2",{id:"getcontract"},"getContract"),(0,r.kt)("h2",{id:"setaccount"},"setAccount"),(0,r.kt)("h2",{id:"setendpoint"},"setEndpoint"),(0,r.kt)("h2",{id:"getaddress"},"getAddress"),(0,r.kt)("h2",{id:"pack"},"pack"),(0,r.kt)("h2",{id:"packtyped"},"packTyped"),(0,r.kt)("h2",{id:"blake2b"},"blake2b"),(0,r.kt)("h2",{id:"setnow"},"setNow"))}u.isMDXComponent=!0}}]);