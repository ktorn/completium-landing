(self.webpackChunkcompletium_landing=self.webpackChunkcompletium_landing||[]).push([[2223],{8215:function(n,e,t){"use strict";var a=t(7294);e.Z=function(n){var e=n.children,t=n.hidden,r=n.className;return a.createElement("div",{role:"tabpanel",hidden:t,className:r},e)}},5064:function(n,e,t){"use strict";t.d(e,{Z:function(){return m}});var a=t(7294),r=t(9443);var l=function(){var n=(0,a.useContext)(r.Z);if(null==n)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return n},i=t(6010),o="tabItem_1uMI",d="tabItemActive_2DSg";var s=37,D=39;var m=function(n){var e=n.lazy,t=n.block,r=n.defaultValue,m=n.values,p=n.groupId,u=n.className,c=l(),I=c.tabGroupChoices,U=c.setTabGroupChoices,P=(0,a.useState)(r),G=P[0],N=P[1],k=a.Children.toArray(n.children),g=[];if(null!=p){var v=I[p];null!=v&&v!==G&&m.some((function(n){return n.value===v}))&&N(v)}var A=function(n){var e=n.currentTarget,t=g.indexOf(e),a=m[t].value;N(a),null!=p&&(U(p,a),setTimeout((function(){var n,t,a,r,l,i,o,s;(n=e.getBoundingClientRect(),t=n.top,a=n.left,r=n.bottom,l=n.right,i=window,o=i.innerHeight,s=i.innerWidth,t>=0&&l<=s&&r<=o&&a>=0)||(e.scrollIntoView({block:"center",behavior:"smooth"}),e.classList.add(d),setTimeout((function(){return e.classList.remove(d)}),2e3))}),150))},f=function(n){var e,t;switch(n.keyCode){case D:var a=g.indexOf(n.target)+1;t=g[a]||g[0];break;case s:var r=g.indexOf(n.target)-1;t=g[r]||g[g.length-1]}null==(e=t)||e.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":t},u)},m.map((function(n){var e=n.value,t=n.label;return a.createElement("li",{role:"tab",tabIndex:G===e?0:-1,"aria-selected":G===e,className:(0,i.Z)("tabs__item",o,{"tabs__item--active":G===e}),key:e,ref:function(n){return g.push(n)},onKeyDown:f,onFocus:A,onClick:A},t)}))),e?(0,a.cloneElement)(k.filter((function(n){return n.props.value===G}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},k.map((function(n,e){return(0,a.cloneElement)(n,{key:e,hidden:n.props.value!==G})}))))}},9443:function(n,e,t){"use strict";var a=(0,t(7294).createContext)(void 0);e.Z=a},5408:function(n,e,t){"use strict";t.r(e),t.d(e,{frontMatter:function(){return D},contentTitle:function(){return m},metadata:function(){return p},toc:function(){return u},default:function(){return I}});var a=t(2122),r=t(9756),l=(t(7294),t(3905)),i=t(6742),o=t(5064),d=t(8215),s=["components"],D={id:"template2",title:"ERC20",sidebar_label:"ERC20",slug:"/templates/erc20"},m=void 0,p={unversionedId:"templates/template2",id:"templates/template2",isDocsHomePage:!1,title:"ERC20",description:"Introduction",source:"@site/docs/templates/template2.md",sourceDirName:"templates",slug:"/templates/erc20",permalink:"/docs/templates/erc20",editUrl:"https://github.com/edukera/completium-landing/tree/master/docs/templates/template2.md",version:"current",frontMatter:{id:"template2",title:"ERC20",sidebar_label:"ERC20",slug:"/templates/erc20"},sidebar:"templates",previous:{title:"FA 1.2",permalink:"/docs/templates/fa12"},next:{title:"FA 2",permalink:"/docs/templates/nft"}},u=[{value:"Introduction",id:"introduction",children:[]},{value:"API",id:"api",children:[{value:"Storage",id:"storage",children:[]},{value:"Entrypoints",id:"entrypoints",children:[]}]},{value:"Originate",id:"originate",children:[]},{value:"Code",id:"code",children:[]}],c={toc:u};function I(n){var e=n.components,t=(0,r.Z)(n,s);return(0,l.kt)("wrapper",(0,a.Z)({},c,t,{components:e,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"introduction"},"Introduction"),(0,l.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"It is strongly suggested to use the ",(0,l.kt)(i.Z,{to:"/docs/templates/fa12",mdxType:"Link"},"FA 1.2")," norm for fungible token."))),(0,l.kt)("h2",{id:"api"},"API"),(0,l.kt)("h3",{id:"storage"},"Storage"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Type"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"total")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"nat")),(0,l.kt)("td",{parentName:"tr",align:null},"total number of unit tokens.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"onetoken")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"nat")),(0,l.kt)("td",{parentName:"tr",align:null},"number of units for one token.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"ledger")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"collection")),(0,l.kt)("td",{parentName:"tr",align:null},"Association between token holder and number of tokens.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"allowance")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"collection")),(0,l.kt)("td",{parentName:"tr",align:null},"Association between the pair owner and spender and the allowed amount.")))),(0,l.kt)("h3",{id:"entrypoints"},"Entrypoints"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Parameters"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"transfer")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"to"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"value")),(0,l.kt)("td",{parentName:"tr",align:null},"Transfers ",(0,l.kt)("inlineCode",{parentName:"td"},"value")," tokens from ",(0,l.kt)("em",{parentName:"td"},"caller")," to ",(0,l.kt)("inlineCode",{parentName:"td"},"to"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"approve")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"spender"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"value")),(0,l.kt)("td",{parentName:"tr",align:null},"Approves ",(0,l.kt)("inlineCode",{parentName:"td"},"spender")," to transfer ",(0,l.kt)("inlineCode",{parentName:"td"},"value")," tokens from ",(0,l.kt)("em",{parentName:"td"},"caller"),".")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"transferFrom")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"from"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"to"),", ",(0,l.kt)("inlineCode",{parentName:"td"},"value")),(0,l.kt)("td",{parentName:"tr",align:null},"Transfers ",(0,l.kt)("inlineCode",{parentName:"td"},"value")," tokens from ",(0,l.kt)("inlineCode",{parentName:"td"},"from")," to ",(0,l.kt)("inlineCode",{parentName:"td"},"to"),". It requires that ",(0,l.kt)("em",{parentName:"td"},"caller")," have been allowed by ",(0,l.kt)("inlineCode",{parentName:"td"},"from")," to transfer this amount to ",(0,l.kt)("inlineCode",{parentName:"td"},"to"),".")))),(0,l.kt)("h2",{id:"originate"},"Originate"),(0,l.kt)("p",null,"Deploy the contract from ",(0,l.kt)("a",{href:"https://archetype-lang.org/"},"Archetype")," code below with the following ",(0,l.kt)(i.Z,{to:"/docs/cli",mdxType:"Link"},"Completium CLI")," example command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"completium-cli deploy erc20.arl --init '(1_000_000_000_000_000, 1_000_000, @tz1LLJ3nxbpGGMLmjzcp9sTMYui87tycG6nG)'\n")),(0,l.kt)("p",null,"The command sets:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"total")," variable to 10 millions"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"onetoken")," variable to 1 million"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"initialholder")," constant to ",(0,l.kt)("inlineCode",{parentName:"li"},"tz1LLJ3nxbpGGMLmjzcp9sTMYui87tycG6nG"))),(0,l.kt)("h2",{id:"code"},"Code"),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Archetype",value:"archetype"},{label:"Michelson",value:"michelson"}],mdxType:"Tabs"},(0,l.kt)(d.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype",metastring:'title="erc20.arl"',title:'"erc20.arl"'},"archetype erc20(total : nat, onetoken: nat, const initialowner : address)\n\nasset allowance identified by owner spender {\n  owner     : address;\n  spender     : address;\n  amount      : nat;\n}\n\nasset ledger identified by holder {\n  holder     : address;\n  tokens     : nat = 0;\n} initialized by {\n  { holder = initialowner; tokens = total }\n}\n\nentry %transfer (%to : pkey<ledger>, value : nat) {\n  require {\n    d0 : ledger[caller].tokens >= value\n  }\n  effect {\n    ledger.addupdate(%to,  { tokens += value });\n    ledger.update(caller, { tokens -= value })\n  }\n}\n\nentry approve(ispender : address, value : nat) {\n  require {\n    d1 : ledger[caller].tokens >= value;\n  }\n  effect {\n    allowance.addupdate((caller, ispender), { amount = value });\n  }\n}\n\nentry transferFrom(%from : address, %to : address, value : nat) {\n  require {\n    d3: allowance[(%from,caller)].amount >= value;\n    d4: ledger[%from].tokens >= value\n  }\n  effect {\n    (* update allowance *)\n    allowance.update((%from,caller), { amount -=  value });\n    (* update token *)\n    ledger.addupdate(%to, { tokens += value });\n    ledger.update(%from,  { tokens -= value });\n  }\n}\n"))),(0,l.kt)(d.Z,{value:"michelson",mdxType:"TabItem"},(0,l.kt)("p",null,"The ",(0,l.kt)(i.Z,{to:"/docs/contract/programming-language#micheslon",mdxType:"Link"},"Michelson")," code is generated with version 1.2.3 of Archetype."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'# (Pair 1000000000000000 (Pair 1000000 (Pair {  } { Elt "tz1LLJ3nxbpGGMLmjzcp9sTMYui87tycG6nG" 1000000000000000 })))\n{\n  storage (pair (nat %total) (pair (nat %onetoken) (pair (map %allowance (pair address address) nat) (map %ledger address nat))));\n  parameter (or (pair %transfer (address %to) (nat %value)) (or (pair %approve (address %ispender) (nat %value)) (pair %transferFrom (address %from) (pair (address %to) (nat %value)))));\n  code { UNPAIR;\n         DIP { UNPAIR; SWAP; UNPAIR; SWAP; UNPAIR; SWAP };\n         IF_LEFT\n           { UNPAIR;\n             SWAP;\n             DUP;\n             DIG 3;\n             DUP;\n             DUG 4;\n             SENDER;\n             GET;\n             IF_NONE\n               { PUSH string "GetNoneValue";\n                 FAILWITH }\n               {  };\n             COMPARE;\n             GE;\n             NOT;\n             IF\n               { PUSH string "InvalidCondition: d0";\n                 FAILWITH }\n               {  };\n             DIG 2;\n             DUP;\n             DUG 3;\n             DIG 2;\n             DUP;\n             DUG 3;\n             MEM;\n             IF\n               { DIG 2;\n                 DUP;\n                 DUG 3;\n                 DIG 2;\n                 DUP;\n                 DUG 3;\n                 GET;\n                 IF_NONE\n                   { PUSH string "GetNoneValue";\n                     FAILWITH }\n                   {  };\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 DIG 2;\n                 DUP;\n                 DUG 3;\n                 DIG 2;\n                 DUP;\n                 DUG 3;\n                 ADD;\n                 SOME;\n                 DIG 4;\n                 DUP;\n                 DUG 5;\n                 UPDATE;\n                 DIP { DIG 3; DROP };\n                 DUG 3;\n                 DROP }\n               { DIG 2;\n                 DUP;\n                 DUG 3;\n                 DIG 2;\n                 DUP;\n                 DUG 3;\n                 MEM;\n                 IF\n                   { PUSH string "KeyAlreadyExists";\n                     FAILWITH }\n                   { DIG 2;\n                     DUP;\n                     DUG 3;\n                     DIG 1;\n                     DUP;\n                     DUG 2;\n                     PUSH nat 0;\n                     ADD;\n                     SOME;\n                     DIG 3;\n                     DUP;\n                     DUG 4;\n                     UPDATE;\n                     DIP { DIG 2; DROP };\n                     DUG 2 } };\n             DIG 2;\n             DUP;\n             DUG 3;\n             SENDER;\n             GET;\n             IF_NONE\n               { PUSH string "GetNoneValue";\n                 FAILWITH }\n               {  };\n             DIG 3;\n             DUP;\n             DUG 4;\n             PUSH int 0;\n             DIG 3;\n             DUP;\n             DUG 4;\n             INT;\n             DIG 3;\n             DUP;\n             DUG 4;\n             SUB;\n             COMPARE;\n             GE;\n             IF\n               { DIG 2;\n                 DUP;\n                 DUG 3;\n                 INT;\n                 DIG 2;\n                 DUP;\n                 DUG 3;\n                 SUB;\n                 ABS }\n               { PUSH string "AssignNat";\n                 FAILWITH };\n             SOME;\n             SENDER;\n             UPDATE;\n             DIP { DIG 3; DROP };\n             DUG 3;\n             DROP 3;\n             SWAP;\n             PAIR;\n             SWAP;\n             PAIR;\n             SWAP;\n             PAIR;\n             NIL operation;\n             PAIR }\n           { IF_LEFT\n               { UNPAIR;\n                 SWAP;\n                 DUP;\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 SENDER;\n                 GET;\n                 IF_NONE\n                   { PUSH string "GetNoneValue";\n                     FAILWITH }\n                   {  };\n                 COMPARE;\n                 GE;\n                 NOT;\n                 IF\n                   { PUSH string "InvalidCondition: d1";\n                     FAILWITH }\n                   {  };\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 DIG 1;\n                 DUP;\n                 DUG 2;\n                 SOME;\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 SENDER;\n                 PAIR;\n                 UPDATE;\n                 DIP { DIG 3; DROP };\n                 DUG 3;\n                 DROP 2;\n                 SWAP;\n                 PAIR;\n                 SWAP;\n                 PAIR;\n                 SWAP;\n                 PAIR;\n                 NIL operation;\n                 PAIR }\n               { UNPAIR;\n                 SWAP;\n                 UNPAIR;\n                 SWAP;\n                 DUP;\n                 DIG 5;\n                 DUP;\n                 DUG 6;\n                 SENDER;\n                 DIG 5;\n                 DUP;\n                 DUG 6;\n                 PAIR;\n                 GET;\n                 IF_NONE\n                   { PUSH string "GetNoneValue";\n                     FAILWITH }\n                   {  };\n                 COMPARE;\n                 GE;\n                 NOT;\n                 IF\n                   { PUSH string "InvalidCondition: d3";\n                     FAILWITH }\n                   {  };\n                 DUP;\n                 DIG 4;\n                 DUP;\n                 DUG 5;\n                 DIG 4;\n                 DUP;\n                 DUG 5;\n                 GET;\n                 IF_NONE\n                   { PUSH string "GetNoneValue";\n                     FAILWITH }\n                   {  };\n                 COMPARE;\n                 GE;\n                 NOT;\n                 IF\n                   { PUSH string "InvalidCondition: d4";\n                     FAILWITH }\n                   {  };\n                 DIG 4;\n                 DUP;\n                 DUG 5;\n                 SENDER;\n                 DIG 4;\n                 DUP;\n                 DUG 5;\n                 PAIR;\n                 GET;\n                 IF_NONE\n                   { PUSH string "GetNoneValue";\n                     FAILWITH }\n                   {  };\n                 DIG 5;\n                 DUP;\n                 DUG 6;\n                 PUSH int 0;\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 INT;\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 SUB;\n                 COMPARE;\n                 GE;\n                 IF\n                   { DIG 2;\n                     DUP;\n                     DUG 3;\n                     INT;\n                     DIG 2;\n                     DUP;\n                     DUG 3;\n                     SUB;\n                     ABS }\n                   { PUSH string "AssignNat";\n                     FAILWITH };\n                 SOME;\n                 SENDER;\n                 DIG 6;\n                 DUP;\n                 DUG 7;\n                 PAIR;\n                 UPDATE;\n                 DIP { DIG 5; DROP };\n                 DUG 5;\n                 DROP;\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 DIG 2;\n                 DUP;\n                 DUG 3;\n                 MEM;\n                 IF\n                   { DIG 3;\n                     DUP;\n                     DUG 4;\n                     DIG 2;\n                     DUP;\n                     DUG 3;\n                     GET;\n                     IF_NONE\n                       { PUSH string "GetNoneValue";\n                         FAILWITH }\n                       {  };\n                     DIG 4;\n                     DUP;\n                     DUG 5;\n                     DIG 2;\n                     DUP;\n                     DUG 3;\n                     DIG 2;\n                     DUP;\n                     DUG 3;\n                     ADD;\n                     SOME;\n                     DIG 4;\n                     DUP;\n                     DUG 5;\n                     UPDATE;\n                     DIP { DIG 4; DROP };\n                     DUG 4;\n                     DROP }\n                   { DIG 3;\n                     DUP;\n                     DUG 4;\n                     DIG 2;\n                     DUP;\n                     DUG 3;\n                     MEM;\n                     IF\n                       { PUSH string "KeyAlreadyExists";\n                         FAILWITH }\n                       { DIG 3;\n                         DUP;\n                         DUG 4;\n                         DIG 1;\n                         DUP;\n                         DUG 2;\n                         PUSH nat 0;\n                         ADD;\n                         SOME;\n                         DIG 3;\n                         DUP;\n                         DUG 4;\n                         UPDATE;\n                         DIP { DIG 3; DROP };\n                         DUG 3 } };\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 GET;\n                 IF_NONE\n                   { PUSH string "GetNoneValue";\n                     FAILWITH }\n                   {  };\n                 DIG 4;\n                 DUP;\n                 DUG 5;\n                 PUSH int 0;\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 INT;\n                 DIG 3;\n                 DUP;\n                 DUG 4;\n                 SUB;\n                 COMPARE;\n                 GE;\n                 IF\n                   { DIG 2;\n                     DUP;\n                     DUG 3;\n                     INT;\n                     DIG 2;\n                     DUP;\n                     DUG 3;\n                     SUB;\n                     ABS }\n                   { PUSH string "AssignNat";\n                     FAILWITH };\n                 SOME;\n                 DIG 5;\n                 DUP;\n                 DUG 6;\n                 UPDATE;\n                 DIP { DIG 4; DROP };\n                 DUG 4;\n                 DROP 4;\n                 SWAP;\n                 PAIR;\n                 SWAP;\n                 PAIR;\n                 SWAP;\n                 PAIR;\n                 NIL operation;\n                 PAIR } } };\n}\n')))))}I.isMDXComponent=!0},6010:function(n,e,t){"use strict";function a(n){var e,t,r="";if("string"==typeof n||"number"==typeof n)r+=n;else if("object"==typeof n)if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=a(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function r(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=a(n))&&(r&&(r+=" "),r+=e);return r}t.d(e,{Z:function(){return r}})}}]);