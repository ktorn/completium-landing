(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{77:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return p}));var a=n(3),c=(n(0),n(238)),l=n(239);const r={id:"cli3",title:"Contract",sidebar_label:"Contract",slug:"/cli/contract"},o={unversionedId:"cli/cli3",id:"cli/cli3",isDocsHomePage:!1,title:"Contract",description:"Deploy / originate",source:"@site/docs/cli/cli3.md",slug:"/cli/contract",permalink:"/docs/cli/contract",editUrl:"https://github.com/edukera/completium-landing/tree/master/docs/cli/cli3.md",version:"current",sidebar_label:"Contract",sidebar:"cli",previous:{title:"Account",permalink:"/docs/cli/account"},next:{title:"JS library",permalink:"/docs/cli/jslibrary"}},i=[{value:"Deploy / originate",id:"deploy--originate",children:[]},{value:"Show",id:"show",children:[{value:"Info",id:"info",children:[]},{value:"All contracts",id:"all-contracts",children:[]},{value:"Source",id:"source",children:[]},{value:"Entries",id:"entries",children:[]}]},{value:"Call",id:"call",children:[]},{value:"Generate javascript",id:"generate-javascript",children:[]},{value:"Generate whyml",id:"generate-whyml",children:[]}],b={toc:i};function p({components:e,...t}){return Object(c.b)("wrapper",Object(a.a)({},b,t,{components:e,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"deploy--originate"},"Deploy / originate"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli deploy <FILE.arl> \\\n    [--as <ACCOUNT_ALIAS>] \\\n    [--named <CONTRACT_ALIAS>] \\\n    [--amount <AMOUNT>(tz|utz)] \\\n    [--metadata-storage <PATH_TO_JSON> | --metadata-uri <VALUE_URI>]\n    [--force]\n")),Object(c.b)("p",null,"For example:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli deploy mycontract.arl --amount 15.5tz\n")),Object(c.b)("p",null,"This creates a contract alias ",Object(c.b)("inlineCode",{parentName:"p"},"mycontract"),"."),Object(c.b)("p",null,"One way to set ",Object(c.b)("em",{parentName:"p"},"metadata")," is to provide a json file as the ",Object(c.b)("inlineCode",{parentName:"p"},"--metadata-storage")," argument."),Object(c.b)("p",null,"For example the following metadata file:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},'$ cat fa12_metadata.json\n{\n  "symbol": "MTK",\n  "name": "MyToken",\n  "decimals": "1",\n  "description": "description of MyToken",\n  "thumbnailUri": "https://completium.com/img/logo_completium_128.png"\n}\n')),Object(c.b)("p",null,"Then the command to deploy the FA 1.2 contract:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli deploy fa12.arl --metadata-storage fa12_metadata.json\n")),Object(c.b)("h2",{id:"show"},"Show"),Object(c.b)("h3",{id:"info"},"Info"),Object(c.b)("p",null,"It is possible to show data related to a contract alias:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli show contract <CONTRACT_ALIAS>\n")),Object(c.b)("p",null,"For example:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"$ completium-cli show contract demo\nName:     demo\nNetwork:  edo\nAddress:  KT1CQmaCLLdEQ3X9PmxoqEAy3Xusvs1J5wW1\nSource:   /home/dev/.completium/sources/demo.arl\nLanguage: archetype\nVersion:  1.2.2\nUrl:      https://better-call.dev/edo2net/KT1CQmaCLLdEQ3X9PmxoqEAy3Xusvs1J5wW1\n")),Object(c.b)("h3",{id:"all-contracts"},"All contracts"),Object(c.b)("p",null,"The following command lists all contracts managed by ",Object(c.b)("inlineCode",{parentName:"p"},"$completium-cli"),":"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"completium-cli show contracts\n")),Object(c.b)("h3",{id:"source"},"Source"),Object(c.b)("p",null,"It is possible to show the contract source with:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli show source <CONTRACT_ALIAS>\n")),Object(c.b)("h3",{id:"entries"},"Entries"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"completium-cli show entries <CONTRACT_ADDRESS|CONTRACT_ALIAS>\n")),Object(c.b)("p",null,"The command also works with a remote contract address:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"completium-cli show entries KT1EFgRdrT4r6QLx2riZiPNHjo7gcQM8n7f7\n%confirm (_ : unit)\n%submit (%ckey : address, %pscore : int)\n%decide (_ : unit)\n")),Object(c.b)("h2",{id:"call"},"Call"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli call <CONTRACT_ADDRESS|CONTRACT_ALIAS> \\\n  [--as <ACCOUNT_ALIAS>] \\\n  [--entry <ENTRYPOINT>] \\\n  [--with <ARG>] \\\n  [--amount <AMOUNT>(tz|utz)]\n")),Object(c.b)("p",null,"For example, if ",Object(c.b)("inlineCode",{parentName:"p"},"mycontract.arl")," defines an entry point ",Object(c.b)("inlineCode",{parentName:"p"},"payback"),":"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-archetype"},"entry payback (n : int) {\n  // ...\n}\n")),Object(c.b)("p",null,"The command to call the entry is:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli call mycontract --entry payback --with 5\n")),Object(c.b)("h2",{id:"generate-javascript"},"Generate javascript"),Object(c.b)("p",null,"The javascript verion of the contract is required when a DApp is originating the contract using ",Object(c.b)(l.a,{to:"/docs/dapp-tools/taquito",mdxType:"Link"},"Taquito"),"."),Object(c.b)("p",null,"The command to generate the javascript version is:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"completium-cli generate javascript <FILE.arl|CONTRACT_ALIAS>\n")),Object(c.b)("p",null,"For example:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli generate javascript mycontract.arl > mycontract.js\n")),Object(c.b)("p",null,"The generated ",Object(c.b)("inlineCode",{parentName:"p"},"mycontract.js")," file exports:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"the Micheline/Json ",Object(c.b)("inlineCode",{parentName:"li"},"code")," of the contract"),Object(c.b)("li",{parentName:"ul"},"the ",Object(c.b)("inlineCode",{parentName:"li"},"getStorage")," method to build the initial storage")),Object(c.b)("p",null,"See ",Object(c.b)(l.a,{to:"/docs/dapp-tools/taquito#contract-origination",mdxType:"Link"},"here")," an example of how to use in a DApp."),Object(c.b)("h2",{id:"generate-whyml"},"Generate whyml"),Object(c.b)("p",null,"The whyml version of the contract is required to formally verify the contract with ",Object(c.b)(l.a,{to:"http://why3.lri.fr/",mdxType:"Link"},"Why3"),"."),Object(c.b)("p",null,"The command to generate the whyml version is:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"completium-cli generate whyml <FILE.arl|CONTRACT_ALIAS>\n")),Object(c.b)("p",null,"For example:"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre"},"$ completium-cli generate whyml mycontract.arl > mycontract.mlw\n")),Object(c.b)("p",null,"The generated ",Object(c.b)("inlineCode",{parentName:"p"},"mycontract.mlw")," file defines 2 modules:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"Mycontract_storage")," that defines the storage"),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"Mycontract")," that defines entrypoints")))}p.isMDXComponent=!0}}]);