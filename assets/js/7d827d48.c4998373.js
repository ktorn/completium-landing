(self.webpackChunkcompletium_landing=self.webpackChunkcompletium_landing||[]).push([[2757],{8215:function(e,t,a){"use strict";var n=a(7294);t.Z=function(e){var t=e.children,a=e.hidden,i=e.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:i},t)}},5064:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var n=a(7294),i=a(9443);var l=function(){var e=(0,n.useContext)(i.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},r=a(6010),o="tabItem_1uMI",c="tabItemActive_2DSg";var s=37,p=39;var u=function(e){var t=e.lazy,a=e.block,i=e.defaultValue,u=e.values,d=e.groupId,m=e.className,f=l(),h=f.tabGroupChoices,v=f.setTabGroupChoices,k=(0,n.useState)(i),y=k[0],b=k[1],g=n.Children.toArray(e.children),N=[];if(null!=d){var T=h[d];null!=T&&T!==y&&u.some((function(e){return e.value===T}))&&b(T)}var x=function(e){var t=e.currentTarget,a=N.indexOf(t),n=u[a].value;b(n),null!=d&&(v(d,n),setTimeout((function(){var e,a,n,i,l,r,o,s;(e=t.getBoundingClientRect(),a=e.top,n=e.left,i=e.bottom,l=e.right,r=window,o=r.innerHeight,s=r.innerWidth,a>=0&&l<=s&&i<=o&&n>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(c),setTimeout((function(){return t.classList.remove(c)}),2e3))}),150))},I=function(e){var t,a;switch(e.keyCode){case p:var n=N.indexOf(e.target)+1;a=N[n]||N[0];break;case s:var i=N.indexOf(e.target)-1;a=N[i]||N[N.length-1]}null==(t=a)||t.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},m)},u.map((function(e){var t=e.value,a=e.label;return n.createElement("li",{role:"tab",tabIndex:y===t?0:-1,"aria-selected":y===t,className:(0,r.Z)("tabs__item",o,{"tabs__item--active":y===t}),key:t,ref:function(e){return N.push(e)},onKeyDown:I,onFocus:x,onClick:x},a)}))),t?(0,n.cloneElement)(g.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},g.map((function(e,t){return(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},9443:function(e,t,a){"use strict";var n=(0,a(7294).createContext)(void 0);t.Z=n},2573:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return p},contentTitle:function(){return u},metadata:function(){return d},toc:function(){return m},default:function(){return h}});var n=a(2122),i=a(9756),l=(a(7294),a(3905)),r=a(6742),o=a(5064),c=a(8215),s=["components"],p={id:"verification6",title:"Failure",sidebar_label:"Failure",slug:"/verification/fail",hide_title:!1},u=void 0,d={unversionedId:"verification/verification6",id:"verification/verification6",isDocsHomePage:!1,title:"Failure",description:"A postcondition says something about the effect of an entrypoint when the entrypoint does not fail. It is possible to specify situations when the entrypoint fails.",source:"@site/docs/verification/verification6.md",sourceDirName:"verification",slug:"/verification/fail",permalink:"/docs/verification/fail",editUrl:"https://github.com/edukera/completium-landing/tree/master/docs/verification/verification6.md",version:"current",frontMatter:{id:"verification6",title:"Failure",sidebar_label:"Failure",slug:"/verification/fail",hide_title:!1},sidebar:"verification",previous:{title:"Postcondition",permalink:"/docs/verification/postcondition"},next:{title:"Invariant",permalink:"/docs/verification/invariant"}},m=[{value:"Basics",id:"basics",children:[]},{value:"Archetype builtins",id:"archetype-builtins",children:[{value:"Execution conditions",id:"execution-conditions",children:[]},{value:"Not found",id:"not-found",children:[]},{value:"Out of bound",id:"out-of-bound",children:[]},{value:"Key exists",id:"key-exists",children:[]},{value:"Arithmetic",id:"arithmetic",children:[]}]}],f={toc:m};function h(e){var t=e.components,a=(0,i.Z)(e,s);return(0,l.kt)("wrapper",(0,n.Z)({},f,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"A ",(0,l.kt)(r.Z,{to:"/docs/verification/postcondition",mdxType:"Link"},"postcondition")," says something about the effect of an entrypoint when the entrypoint does not fail. It is possible to specify situations when the entrypoint fails."),(0,l.kt)("p",null,"The goal is to generate one failure specification for every case the entrypoint fails."),(0,l.kt)("h2",{id:"basics"},"Basics"),(0,l.kt)("p",null,"For example, the entrypoint ",(0,l.kt)("inlineCode",{parentName:"p"},"set")," fails when the parameter value ",(0,l.kt)("inlineCode",{parentName:"p"},"v")," is greater than 10, and fails with the pair ",(0,l.kt)("inlineCode",{parentName:"p"},"v")," and the message ",(0,l.kt)("inlineCode",{parentName:"p"},'"v must be below 10"'),":"),(0,l.kt)(o.Z,{defaultValue:"specification",values:[{label:"Specification",value:"specification"},{label:"Entrypoint",value:"archetype"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'specification entry set(v : nat)\n  fails {\n    f1 with (x : nat * string):\n      (* specify failure object *)\n      x   = (v, "v must be below 10") and\n      (* specify failure condition *)\n      v >= 10\n  }\n}\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'archetype simple\n\nvariable value : nat = 0\n\nentry set(v : nat) {\n  if v < 10 then\n    value := v\n  else\n    fail (v, "v must be below 10")\n}\n')))),(0,l.kt)("p",null,"Keyword ",(0,l.kt)("inlineCode",{parentName:"p"},"fails")," introduces the section to declare specification of fail situations. In the example above the fail statment, is identified with id ",(0,l.kt)("inlineCode",{parentName:"p"},"f1"),"."),(0,l.kt)("p",null,"As illustrated above, the failure statement is the conjunction of:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"a statement to describe the object the entrypoint fails with"),(0,l.kt)("li",{parentName:"ol"},"a statement to specify the conditions that makes the entrypoint fail")),(0,l.kt)("p",null,"The object the entrypoint fails with is usually a string message, but it can be more complex like for example a pair with the string message and a computed value used in the failure decision."),(0,l.kt)("h2",{id:"archetype-builtins"},"Archetype builtins"),(0,l.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"This section describes specification features available from version 1.2.4 of Archetype."))),(0,l.kt)("p",null,"The Archetype language provides several high-level syntaxes and builtins that may fail. This section presents how to specify their failure behavior."),(0,l.kt)("h3",{id:"execution-conditions"},"Execution conditions"),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Code",value:"archetype"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'f1 with InvalidCaller(msg : string) :\n  msg = "InvalidCaller" and\n  caller <> <ADDRESS>\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"called by <ADDRESS>\n")))),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Code",value:"archetype"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'f1 with InvalidCondition(x : string * string) :\n  x   = ("InvalidCondition", "r1") and\n  not <CONDITION>\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"require {\n  r1 : <CONDITION>\n}\n")))),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Code",value:"archetype"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'f1 with InvalidCondition(x : string * string) :\n  x = ("InvalidCondition", "f1") and\n  <CONDITION>\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"failif {\n  f1 : <CONDITION>\n}\n")))),(0,l.kt)("h3",{id:"not-found"},"Not found"),(0,l.kt)("p",null,"In the following, ",(0,l.kt)("inlineCode",{parentName:"p"},"c")," is an asset collection, ",(0,l.kt)("inlineCode",{parentName:"p"},"k")," is a key value and ",(0,l.kt)("inlineCode",{parentName:"p"},"i")," is a nat."),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Code",value:"archetype"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'f with NotFound(msg : string) :\n  msg = "NotFound" and\n  not c.contains(k)\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"c[k]\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"c.remove(k)\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"c.update(k, ...)\n")))),(0,l.kt)("h3",{id:"out-of-bound"},"Out of bound"),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Code",value:"archetype"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'f with OutOfBound(x : string * nat) :\n  x   = ("OutOfBound", i) and\n  c.count() < i\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"c.nth(i)\n")))),(0,l.kt)("h3",{id:"key-exists"},"Key exists"),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Code",value:"archetype"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'f with KeyExists(msg : string) :\n  msg = "KeyExists" and\n  c.contains(k)\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"c.add({\xa0<ID> = k; ...\xa0})\n")))),(0,l.kt)("h3",{id:"arithmetic"},"Arithmetic"),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Code",value:"archetype"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'f with DivByZero(msg : string) :\n  msg = "DivByZero" and\n  b = 0\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"a / b\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"a div b\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"a % b\n")))),(0,l.kt)(o.Z,{defaultValue:"archetype",values:[{label:"Code",value:"archetype"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},(0,l.kt)(c.Z,{value:"specification",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},'f with NatAssign(msg : string) :\n  msg = "NatAssign" and\n  n < v\n'))),(0,l.kt)(c.Z,{value:"archetype",mdxType:"TabItem"},(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-archetype"},"n -= v\n")))))}h.isMDXComponent=!0}}]);