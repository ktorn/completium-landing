(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{124:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return d})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return p}));var n=a(3),r=a(7),l=(a(0),a(224)),c=a(225),b=a(240),o=a(241),i={id:"template2",title:"ERC20",sidebar_label:"ERC20",slug:"/templates/erc20"},d={unversionedId:"templates/template2",id:"templates/template2",isDocsHomePage:!1,title:"ERC20",description:"Introduction",source:"@site/docs/templates/template2.md",slug:"/templates/erc20",permalink:"/docs/templates/erc20",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/templates/template2.md",version:"current",sidebar_label:"ERC20",sidebar:"templates",previous:{title:"FA 1.2",permalink:"/docs/templates/fa12"},next:{title:"FA 2",permalink:"/docs/templates/nft"}},s=[{value:"Introduction",id:"introduction",children:[]},{value:"API",id:"api",children:[{value:"Storage",id:"storage",children:[]},{value:"Entrypoints",id:"entrypoints",children:[]}]},{value:"Originate",id:"originate",children:[]},{value:"Code",id:"code",children:[]}],m={toc:s};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},m,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"introduction"},"Introduction"),Object(l.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(l.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"It is strongly suggested to use the ",Object(l.b)(c.a,{to:"/docs/templates/fa12",mdxType:"Link"},"FA 1.2")," norm for fungible token."))),Object(l.b)("h2",{id:"api"},"API"),Object(l.b)("h3",{id:"storage"},"Storage"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Name"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"total")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"nat")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"total number of unit tokens.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"onetoken")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"nat")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"number of units for one token.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"ledger")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"collection")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Association between token holder and number of tokens.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"allowance")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"collection")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Association between the pair owner and spender and the allowed amount.")))),Object(l.b)("h3",{id:"entrypoints"},"Entrypoints"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Name"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Parameters"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"transfer")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"to"),", ",Object(l.b)("inlineCode",{parentName:"td"},"value")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Transfers ",Object(l.b)("inlineCode",{parentName:"td"},"value")," tokens from ",Object(l.b)("em",{parentName:"td"},"caller")," to ",Object(l.b)("inlineCode",{parentName:"td"},"to"),".")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"approve")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"spender"),", ",Object(l.b)("inlineCode",{parentName:"td"},"value")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Approves ",Object(l.b)("inlineCode",{parentName:"td"},"spender")," to transfer ",Object(l.b)("inlineCode",{parentName:"td"},"value")," tokens from ",Object(l.b)("em",{parentName:"td"},"caller"),".")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"transferFrom")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"from"),", ",Object(l.b)("inlineCode",{parentName:"td"},"to"),", ",Object(l.b)("inlineCode",{parentName:"td"},"value")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Transfers ",Object(l.b)("inlineCode",{parentName:"td"},"value")," tokens from ",Object(l.b)("inlineCode",{parentName:"td"},"from")," to ",Object(l.b)("inlineCode",{parentName:"td"},"to"),". It requires that ",Object(l.b)("em",{parentName:"td"},"caller")," have been allowed by ",Object(l.b)("inlineCode",{parentName:"td"},"from")," to transfer this amount to ",Object(l.b)("inlineCode",{parentName:"td"},"to"),".")))),Object(l.b)("h2",{id:"originate"},"Originate"),Object(l.b)("p",null,"Deploy the contract from ",Object(l.b)("a",{href:"https://archetype-lang.org/"},"Archetype")," code below with the following ",Object(l.b)(c.a,{to:"/docs/cli",mdxType:"Link"},"Completium CLI")," example command:"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{}),"completium-cli deploy erc20.arl --init '(1_000_000_000_000_000, 1_000_000, @tz1LLJ3nxbpGGMLmjzcp9sTMYui87tycG6nG)'\n")),Object(l.b)("p",null,"The command sets:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"total")," variable to 10 millions"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"onetoken")," variable to 1 million"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"initialholder")," constant to ",Object(l.b)("inlineCode",{parentName:"li"},"tz1LLJ3nxbpGGMLmjzcp9sTMYui87tycG6nG"))),Object(l.b)("h2",{id:"code"},"Code"),Object(l.b)(b.a,{defaultValue:"archetype",values:[{label:"Archetype",value:"archetype"},{label:"Michelson",value:"michelson"}],mdxType:"Tabs"},Object(l.b)(o.a,{value:"archetype",mdxType:"TabItem"},Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype",metastring:'title="erc20.arl"',title:'"erc20.arl"'}),"archetype erc20(total : nat, onetoken: nat, const initialowner : address)\n\nasset allowance identified by owner spender {\n  owner     : address;\n  spender     : address;\n  amount      : nat;\n}\n\nasset ledger identified by holder {\n  holder     : address;\n  tokens     : nat = 0;\n} initialized by {\n  { holder = initialholder; tokens = total }\n}\n\nentry %transfer (to : pkey<ledger>, value : nat) {\n  require {\n    d0 : ledger[caller].tokens >= value\n  }\n  effect {\n    ledger.addupdate(to,  { tokens += value });\n    ledger.update(caller, { tokens -= value })\n  }\n}\n\nentry approve(spender : address, value : nat) {\n  require {\n    d1 : ledger[caller].tokens >= value;\n  }\n  effect {\n    allowance.addupdate((caller, spender), { amount = value });\n  }\n}\n\nentry transferFrom(%from : address, %to : address, value : nat) {\n  require {\n    d3: allowance[(%from,caller)].amount >= value;\n    d4: ledger[%from].tokens >= value\n  }\n  effect {\n    (* update allowance *)\n    allowance.update((%from,caller), { amount -=  value });\n    (* update token *)\n    ledger.addupdate(%to, { tokens += value });\n    ledger.update(%from,  { tokens -= value });\n  }\n}\n"))),Object(l.b)(o.a,{value:"michelson",mdxType:"TabItem"},Object(l.b)("p",null,"The ",Object(l.b)(c.a,{to:"/docs/contract/programming-language#micheslon",mdxType:"Link"},"Michelson")," code is generated with version 1.2.3 of Archetype."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"")))))}p.isMDXComponent=!0},233:function(e,t,a){"use strict";function n(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=n(e[t]))&&(r&&(r+=" "),r+=a);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}},238:function(e,t,a){"use strict";var n=a(0),r=a(239);t.a=function(){const e=Object(n.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},239:function(e,t,a){"use strict";var n=a(0);const r=Object(n.createContext)(void 0);t.a=r},240:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(238),c=a(233),b=a(56),o=a.n(b);const i=37,d=39;t.a=function(e){const{lazy:t,block:a,defaultValue:b,values:s,groupId:m,className:p}=e,{tabGroupChoices:u,setTabGroupChoices:j}=Object(l.a)(),[O,N]=Object(n.useState)(b),h=n.Children.toArray(e.children);if(null!=m){const e=u[m];null!=e&&e!==O&&s.some((t=>t.value===e))&&N(e)}const f=e=>{N(e),null!=m&&j(m,e)},g=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":a},p)},s.map((({value:e,label:t})=>r.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":O===e,className:Object(c.a)("tabs__item",o.a.tabItem,{"tabs__item--active":O===e}),key:e,ref:e=>g.push(e),onKeyDown:e=>{((e,t,a)=>{switch(a.keyCode){case d:((e,t)=>{const a=e.indexOf(t)+1;e[a]?e[a].focus():e[0].focus()})(e,t);break;case i:((e,t)=>{const a=e.indexOf(t)-1;e[a]?e[a].focus():e[e.length-1].focus()})(e,t)}})(g,e.target,e)},onFocus:()=>f(e),onClick:()=>{f(e)}},t)))),t?Object(n.cloneElement)(h.filter((e=>e.props.value===O))[0],{className:"margin-vert--md"}):r.a.createElement("div",{className:"margin-vert--md"},h.map(((e,t)=>Object(n.cloneElement)(e,{key:t,hidden:e.props.value!==O})))))}},241:function(e,t,a){"use strict";var n=a(3),r=a(0),l=a.n(r);t.a=function({children:e,hidden:t,className:a}){return l.a.createElement("div",Object(n.a)({role:"tabpanel"},{hidden:t,className:a}),e)}}}]);