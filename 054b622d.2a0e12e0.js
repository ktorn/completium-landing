(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{76:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return i})),a.d(t,"toc",(function(){return b})),a.d(t,"default",(function(){return m}));var c=a(3),n=a(7),l=(a(0),a(228)),r=a(229),o={id:"cli3",title:"Contract",sidebar_label:"Contract",slug:"/cli/contract"},i={unversionedId:"cli/cli3",id:"cli/cli3",isDocsHomePage:!1,title:"Contract",description:"Deploy / originate",source:"@site/docs/cli/cli3.md",slug:"/cli/contract",permalink:"/docs/cli/contract",editUrl:"https://github.com/edukera/completium-landing/tree/master/docs/cli/cli3.md",version:"current",sidebar_label:"Contract",sidebar:"cli",previous:{title:"Account",permalink:"/docs/cli/account"},next:{title:"JS library",permalink:"/docs/cli/jslibrary"}},b=[{value:"Deploy / originate",id:"deploy--originate",children:[]},{value:"Show",id:"show",children:[{value:"Info",id:"info",children:[]},{value:"All contracts",id:"all-contracts",children:[]},{value:"Source",id:"source",children:[]},{value:"Entries",id:"entries",children:[]}]},{value:"Call",id:"call",children:[]},{value:"Generate javascript",id:"generate-javascript",children:[]},{value:"Generate whyml",id:"generate-whyml",children:[]}],p={toc:b};function m(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(l.b)("wrapper",Object(c.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"deploy--originate"},"Deploy / originate"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli deploy <FILE.arl> \\\n    [--as <ACCOUNT_ALIAS>] \\\n    [--named <CONTRACT_ALIAS>] \\\n    [--amount <AMOUNT>(tz|utz)] \\\n    [--metadata-storage <PATH_TO_JSON> | --metadata-uri <VALUE_URI>]\n    [--force]\n")),Object(l.b)("p",null,"For example:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli deploy mycontract.arl --amount 15.5tz\n")),Object(l.b)("p",null,"This creates a contract alias ",Object(l.b)("inlineCode",{parentName:"p"},"mycontract"),"."),Object(l.b)("p",null,"One way to set ",Object(l.b)("em",{parentName:"p"},"metadata")," is to provide a json file as the ",Object(l.b)("inlineCode",{parentName:"p"},"--metadata-storage")," argument."),Object(l.b)("p",null,"For example the following metadata file:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{className:"language-bash"}),'$ cat fa12_metadata.json\n{\n  "symbol": "MTK",\n  "name": "MyToken",\n  "decimals": "1",\n  "description": "description of MyToken",\n  "thumbnailUri": "https://completium.com/img/logo_completium_128.png"\n}\n')),Object(l.b)("p",null,"Then the command to deploy the FA 1.2 contract:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli deploy fa12.arl --metadata-storage fa12_metadata.json\n")),Object(l.b)("h2",{id:"show"},"Show"),Object(l.b)("h3",{id:"info"},"Info"),Object(l.b)("p",null,"It is possible to show data related to a contract alias:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli show contract <CONTRACT_ALIAS>\n")),Object(l.b)("p",null,"For example:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{className:"language-bash"}),"$ completium-cli show contract demo\nName:     demo\nNetwork:  edo\nAddress:  KT1CQmaCLLdEQ3X9PmxoqEAy3Xusvs1J5wW1\nSource:   /home/dev/.completium/sources/demo.arl\nLanguage: archetype\nVersion:  1.2.2\nUrl:      https://better-call.dev/edo2net/KT1CQmaCLLdEQ3X9PmxoqEAy3Xusvs1J5wW1\n")),Object(l.b)("h3",{id:"all-contracts"},"All contracts"),Object(l.b)("p",null,"The following command lists all contracts managed by ",Object(l.b)("inlineCode",{parentName:"p"},"$completium-cli"),":"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"completium-cli show contracts\n")),Object(l.b)("h3",{id:"source"},"Source"),Object(l.b)("p",null,"It is possible to show the contract source with:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli show source <CONTRACT_ALIAS>\n")),Object(l.b)("h3",{id:"entries"},"Entries"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"completium-cli show entries <CONTRACT_ADDRESS|CONTRACT_ALIAS>\n")),Object(l.b)("p",null,"The command also works with a remote contract address:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"completium-cli show entries KT1EFgRdrT4r6QLx2riZiPNHjo7gcQM8n7f7\n%confirm (_ : unit)\n%submit (%ckey : address, %pscore : int)\n%decide (_ : unit)\n")),Object(l.b)("h2",{id:"call"},"Call"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli call <CONTRACT_ADDRESS|CONTRACT_ALIAS> \\\n  [--as <ACCOUNT_ALIAS>] \\\n  [--entry <ENTRYPOINT>] \\\n  [--with <ARG>] \\\n  [--amount <AMOUNT>(tz|utz)]\n")),Object(l.b)("p",null,"For example, if ",Object(l.b)("inlineCode",{parentName:"p"},"mycontract.arl")," defines an entry point ",Object(l.b)("inlineCode",{parentName:"p"},"payback"),":"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{className:"language-archetype"}),"entry payback (n : int) {\n  // ...\n}\n")),Object(l.b)("p",null,"The command to call the entry is:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli call mycontract --entry payback --with 5\n")),Object(l.b)("h2",{id:"generate-javascript"},"Generate javascript"),Object(l.b)("p",null,"The javascript verion of the contract is required when a DApp is originating the contract using ",Object(l.b)(r.a,{to:"/docs/dapp-tools/taquito",mdxType:"Link"},"Taquito"),"."),Object(l.b)("p",null,"The command to generate the javascript version is:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"completium-cli generate javascript <FILE.arl|CONTRACT_ALIAS>\n")),Object(l.b)("p",null,"For example:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli generate javascript mycontract.arl > mycontract.js\n")),Object(l.b)("p",null,"The generated ",Object(l.b)("inlineCode",{parentName:"p"},"mycontract.js")," file exports:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"the Micheline/Json ",Object(l.b)("inlineCode",{parentName:"li"},"code")," of the contract"),Object(l.b)("li",{parentName:"ul"},"the ",Object(l.b)("inlineCode",{parentName:"li"},"getStorage")," method to build the initial storage")),Object(l.b)("p",null,"See ",Object(l.b)(r.a,{to:"/docs/dapp-tools/taquito#contract-origination",mdxType:"Link"},"here")," an example of how to use in a DApp."),Object(l.b)("h2",{id:"generate-whyml"},"Generate whyml"),Object(l.b)("p",null,"The whyml version of the contract is required to formally verify the contract with ",Object(l.b)(r.a,{to:"http://why3.lri.fr/",mdxType:"Link"},"Why3"),"."),Object(l.b)("p",null,"The command to generate the whyml version is:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"completium-cli generate whyml <FILE.arl|CONTRACT_ALIAS>\n")),Object(l.b)("p",null,"For example:"),Object(l.b)("pre",null,Object(l.b)("code",Object(c.a)({parentName:"pre"},{}),"$ completium-cli generate whyml mycontract.arl > mycontract.mlw\n")),Object(l.b)("p",null,"The generated ",Object(l.b)("inlineCode",{parentName:"p"},"mycontract.mlw")," file defines 2 modules:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"Mycontract_storage")," that defines the storage"),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"Mycontract")," that defines entrypoints")))}m.isMDXComponent=!0}}]);