(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{76:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return d})),n.d(t,"default",(function(){return p}));var a=n(3),r=n(7),i=(n(0),n(181)),o={id:"iot9",title:"Implementation",sidebar_label:"Implementation",slug:"/dapp-iot/implementation"},c={unversionedId:"dapp-iot/iot9",id:"dapp-iot/iot9",isDocsHomePage:!1,title:"Implementation",description:"Start",source:"@site/docs/dapp-iot/iot9.md",slug:"/dapp-iot/implementation",permalink:"/completium-landing/docs/dapp-iot/implementation",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/dapp-iot/iot9.md",version:"current",sidebar_label:"Implementation",sidebar:"iot",previous:{title:"Interface",permalink:"/completium-landing/docs/dapp-iot/interface"}},d=[{value:"Start",id:"start",children:[]},{value:"Interrupt",id:"interrupt",children:[]},{value:"Collect",id:"collect",children:[]},{value:"Set Unit",id:"set-unit",children:[]}],l={toc:d};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"start"},"Start"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-archetype"}),"entry start () {\n    require {\n        r1: now > dateofstop;\n    }\n    effect {\n        var t : nat = transferred;\n        var dur : duration = (get_rate_in_s_by_utz() * t)*1s;\n        if dur > read_interval then (\n            dateofstop := now + dur + read_interval;\n            dateofstart := now;\n            user := some(caller)\n        )\n    }\n}\n")),Object(i.b)("h2",{id:"interrupt"},"Interrupt"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-archetype"}),"entry interrupt () {\n    require {\n        r2: caller = opt_get(user) and now < dateofstop\n    }\n    effect {\n        transfer (get_return_tz()) to caller;\n        dateofstop  := now - read_interval;\n        dateofstart := now - read_interval;\n    }\n}\n")),Object(i.b)("h2",{id:"collect"},"Collect"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-archetype"}),"entry collect () {\n    called by owner\n    effect {\n        var keep = 0tz;\n        if now < dateofstop then\n            keep := get_return_tz();\n        if balance - keep > 0tz then\n            transfer (balance - keep) to owner\n    }\n}\n")),Object(i.b)("h2",{id:"set-unit"},"Set Unit"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-archetype"}),"entry setunits (dunit : duration, tunit : tez) {\n    called by owner\n    effect {\n        time_unit := dunit;\n        tez_unit := tunit;\n    }\n}\n")))}p.isMDXComponent=!0}}]);