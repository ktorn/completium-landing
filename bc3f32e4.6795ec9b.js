(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{162:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return o})),a.d(t,"default",(function(){return s}));var n=a(3),r=a(7),d=(a(0),a(197)),l={id:"dex11",title:"Interface",sidebar_label:"Interface",slug:"/dapp-dex/fa12interface"},c={unversionedId:"dapp-dex/dex11",id:"dapp-dex/dex11",isDocsHomePage:!1,title:"Interface",description:"Storage",source:"@site/docs/dapp-dex/dex11.md",slug:"/dapp-dex/fa12interface",permalink:"/docs/dapp-dex/fa12interface",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/dapp-dex/dex11.md",version:"current",sidebar_label:"Interface",sidebar:"dex",previous:{title:"Implementation",permalink:"/docs/dapp-dex/implementation"},next:{title:"Implementation",permalink:"/docs/dapp-dex/fa12implementation"}},o=[{value:"Storage",id:"storage",children:[]},{value:"Entry points",id:"entry-points",children:[{value:"Transfer",id:"transfer",children:[]},{value:"Approve",id:"approve",children:[]},{value:"Get balance",id:"get-balance",children:[]},{value:"Get allowance",id:"get-allowance",children:[]},{value:"Get total supply",id:"get-total-supply",children:[]}]}],p={toc:o};function s(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(d.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(d.b)("h2",{id:"storage"},"Storage"),Object(d.b)("p",null,"The contract declares two ",Object(d.b)("a",Object(n.a)({parentName:"p"},{href:"https://docs.archetype-lang.org/archetype-language/data-model"}),"assets"),":"),Object(d.b)("pre",null,Object(d.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype"}),"asset ledger identified by holder to big_map {\n  holder     : address;\n  tokens     : nat = 0;\n} initialized by {\n  { holder = caller; tokens = totalsupply }\n}\n")),Object(d.b)("p",null,"The ",Object(d.b)("inlineCode",{parentName:"p"},"ledger")," asset is the cap table: it holds the number of tokens for each token holder.\n",Object(d.b)("inlineCode",{parentName:"p"},"totalsupply")," is the initial number of tokens held by the originator of the contract."),Object(d.b)("pre",null,Object(d.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype"}),"asset allowance identified by addr_owner addr_spender to big_map {\n  addr_owner       : address;\n  addr_spender     : address;\n  amount           : nat;\n}\n")),Object(d.b)("p",null,"The ",Object(d.b)("inlineCode",{parentName:"p"},"allowance")," asset stores the amount of tokens that can be spent by ",Object(d.b)("inlineCode",{parentName:"p"},"addr_spender")," on the behalf of ",Object(d.b)("inlineCode",{parentName:"p"},"addr_owner"),"."),Object(d.b)("h2",{id:"entry-points"},"Entry points"),Object(d.b)("h3",{id:"transfer"},"Transfer"),Object(d.b)("pre",null,Object(d.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype"}),"entry %transfer (%from : address, %to : address, value : nat) {\n  ...\n}\n")),Object(d.b)("h3",{id:"approve"},"Approve"),Object(d.b)("pre",null,Object(d.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype"}),"entry approve() {\n    ...\n}\n")),Object(d.b)("h3",{id:"get-balance"},"Get balance"),Object(d.b)("pre",null,Object(d.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype"}),"getter getAllowance (owner : address, spender : address) : nat {\n  return (allowance[(owner, spender)].amount)\n}\n")),Object(d.b)("h3",{id:"get-allowance"},"Get allowance"),Object(d.b)("pre",null,Object(d.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype"}),"getter getBalance (owner : address) : nat {\n  return (ledger[owner].tokens)\n}\n")),Object(d.b)("h3",{id:"get-total-supply"},"Get total supply"),Object(d.b)("pre",null,Object(d.b)("code",Object(n.a)({parentName:"pre"},{className:"language-archetype"}),"getter getTotalSupply () : nat {\n  return totalsupply\n}\n")))}s.isMDXComponent=!0}}]);