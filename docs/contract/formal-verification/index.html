<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Completium Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Completium Blog Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-react-helmet="true">Formal Verification | Completium</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Formal Verification | Completium"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/docs/contract/formal-verification"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/docs/contract/formal-verification"><link rel="stylesheet" href="/styles.12545298.css">
<link rel="preload" href="/styles.822531e8.js" as="script">
<link rel="preload" href="/runtime~main.81e5ce41.js" as="script">
<link rel="preload" href="/main.18df72ca.js" as="script">
<link rel="preload" href="/common.6be7b9dd.js" as="script">
<link rel="preload" href="/2.99f15d99.js" as="script">
<link rel="preload" href="/160.07a38516.js" as="script">
<link rel="preload" href="/161.da0512e0.js" as="script">
<link rel="preload" href="/935f2afb.b2db7189.js" as="script">
<link rel="preload" href="/155.f85b55ee.js" as="script">
<link rel="preload" href="/4c2e1947.ced1d79d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a><a class="navbar__item navbar__link" href="/docs/dapp-first">First DApp</a><a class="navbar__item navbar__link" href="/dapps">DApps</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/contract">Smart Contract</a><a class="navbar__item navbar__link" href="/docs/templates">Contract Templates</a><a class="navbar__item navbar__link" href="/docs/cli">CLI</a><a class="navbar__item navbar__link" href="/docs/dapp-tools">Technical stack</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/edukera/completium-landing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/dapp-first">First DApp</a></li><li class="menu__list-item"><a class="menu__link" href="/dapps">DApps</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/contract">Smart Contract</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/templates">Contract Templates</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/cli">CLI</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/dapp-tools">Technical stack</a></li><li class="menu__list-item"><a href="https://github.com/edukera/completium-landing" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/contract">Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/contract/programming-language">Programming language</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Archetype Tutorial</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract/tuto/archetype-hello">1. Hello Tezos world</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract/tuto/archetype-execcond">2. Execution conditions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract/tuto/archetype-rattrans">3. Rationals &amp; Transfers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract/tuto/archetype-datedur">4. Dates &amp; Durations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract/tuto/archetype-datearith">5. Dates arithmetic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract/tuto/archetype-statem">6. State Machine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract/tuto/archetype-assets">7. Assets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/contract/tuto/archetype-callcontr">8. Call a contract</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/contract/test-scenario">Test Scenario</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/contract/formal-verification">Formal Verification</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Formal Verification</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>Formal verification is the act of proving or disproving the correctness of a program with respect to a certain formal specification, using formal methods of mathematics.</p><p>A formal specification uses a formal language to describe what the program is supposed to do. A formal language is defined by a grammar (a set of rules that define how sentences are formed) such that it is possible to decide programmatically whether sentences are correctly formed or not.</p><p>Formal specification makes it possible to automatically analyze whether a program verifies it or not.</p><p>A fundamental result of computer science is that it is not possible to decide automatically whether any program verifies any specification, that is that there is no single program that can decide whether a program verifies a specification. However, there is a wide range of verification problems (simpler ones) that can be solved automatically.</p><p>When automatic approaches fail, it is then possible to interact with formal method systems to manually (yet formally) solve the problem. The standard verification process is then semi-automatic.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="benefit"></a>Benefit<a class="hash-link" href="#benefit" title="Direct link to heading">#</a></h2><p>Consider the following function:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-archetype codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">function sum(n : int) = if n &gt; 0 then n + sum(n - 1) else 0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>And the formal property <em>P</em>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-archetype codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">forall n, n &gt;= 0 -&gt; sum(n) = n * (n + 1) / 2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>which reads: for every integer n, if n is above 0, then <code>sum(n)</code> is equal to n multiplied by n plus 1, divided by 2.</p><p>How to make sure that <code>sum</code> verifies <em>P</em>?</p><p>You can either write a test program that computes the <code>sum</code> function for a large range of values, say for <code>n</code> from 0 to 1000000, and checks the formula; or you can <em>mathematically</em> prove the property (with inductive reasoning for example) in a few reasoning steps.</p><p>While you may be reasonably confident in the test program, and by transtion in the <code>run</code> function, the property however is tested only on a limited set of values, and the test program may itself contain bugs. The question to decide whether the test is correct is stil not decidable on a systemic level.</p><p>With mathematic reasoning, properties are proven for any parameter value, and the confidence just relies on whether the proof is correct or not.</p><p>Another fundamental result is that it <em>is</em> possible to automatically decide whether a proof is correct or not, as long as it is formalized. Hence the confidence you get with formal methods does not rely on the confidence you may give the developper of the program and tests, but it relies on the <em>existence</em> of a correct formal proof.</p><p>As such, formal verification provides <em>trust-less</em> confidence. That&#x27;s why it is a key point for the development of smart contracts: with smart contracts, blockchains lost their trust-less execution feature; they claim it back with formal verification...</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="limits"></a>Limits<a class="hash-link" href="#limits" title="Direct link to heading">#</a></h2><p>Formal verification is relative to the specification. It is possible that a verified program does not behave as expected if this expectation has not been formalized in the specification.</p><p>Another caveat of formal verification is the difficulty to read specification. What confidence can you have in a verified program if you do not understand its specification?</p><p>That&#x27;s why writing specification is a key step of the verification process.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="tools"></a>Tools<a class="hash-link" href="#tools" title="Direct link to heading">#</a></h2><p>The <a href="/docs/dapp-tools/tezos">Tezos</a> community provides a rich technical and human eco-system regarding formal verification:</p><table><thead><tr><th>Tools</th><th align="left">Description</th></tr></thead><tbody><tr><td><a href="https://gitlab.com/nomadic-labs/mi-cho-coq/" target="_blank" rel="noopener noreferrer">Michocoq</a></td><td align="left">A specification of Michelson in <a href="https://coq.inria.fr/" target="_blank" rel="noopener noreferrer">Coq</a> to prove properties about smart contracts in Tezos.</td></tr><tr><td><a href="https://archetype-lang.org/" target="_blank" rel="noopener noreferrer">Archetype</a></td><td align="left">Archetype provides a specification language for contract invariant and entry point postconditions. It generates the contract in the <a href="http://why3.lri.fr/" target="_blank" rel="noopener noreferrer">Why3</a> language for verification</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="archetype"></a>Archetype<a class="hash-link" href="#archetype" title="Direct link to heading">#</a></h2><p>Some Completium <a href="/docs/templates">contract templates</a> have been formally specified with Archetype and verified with Why3 : <a href="/docs/templates/fa12">FA 1.2</a>, <a href="/docs/templates/miles">Miles</a>, ...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="specification-language"></a>Specification language<a class="hash-link" href="#specification-language" title="Direct link to heading">#</a></h3><p>What can you specify with the Archetype <a href="https://docs.archetype-lang.org/archetype-language/contract-specification" target="_blank" rel="noopener noreferrer">specification language</a>?</p><p>Mainly contract <em>invariants</em>, and entrypoint <em>postconditions</em>:</p><ul><li>a contract <em>invariant</em> is a property of the contract&#x27;s storage that is always true, regardless of the transactions history.</li><li>an entrypoint <em>postcondition</em> is a property about what changes in the contract&#x27;s storage with the execution of the entrypoint.</li></ul><p>An invariant of the <a href="/docs/templates/fa12">FA 1.2</a> contract states that the total number of tokens is a constant (no token is minted):</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-archetype codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">specification {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  i: ledger.sum(tokens) = totalsupply;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>A postcondition of the <code>consume</code> entrypoint of the <a href="/docs/templates/miles">Miles</a> contract states that the number of miles is decreased by <code>quantity</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-archetype codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">specification entry consume (quantity : int) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  postcondition p {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    mile.sum(the.amount) = before.mile.sum(the.amount) - quantity</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Note that postconditions say something about the contract&#x27;s storage when the endpoint does <em>not fail</em>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="whyml"></a>Whyml<a class="hash-link" href="#whyml" title="Direct link to heading">#</a></h3><p>Archetype generates the contract&#x27;s code and specification in whyml, the <a href="http://why3.lri.fr/" target="_blank" rel="noopener noreferrer">Why3</a> language.</p><p>The following <a href="/docs/cli">Completium CLI</a> command:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-bash codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">completium-cli generate whyml elementary.arl</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>generates the whyml version of the elementary archetype example contract:</p><div class="mdxCodeBlock_1zKU"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_2eSY">elementary.arl</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-archetype codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">archetype js</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">variable str : string = &quot;&quot;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">entry default(v : string) { str := v }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">specification entry default(v :string) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    postcondition p {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        str = v</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The generated whyml program has two modules: <code>Elementary_storage</code> and <code>Elementary</code>:</p><div class="mdxCodeBlock_1zKU"><div style="color:#F8F8F2;background-color:#282A36" class="codeBlockTitle_2eSY">elementary.mlw</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-ocaml codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">module</span><span class="token plain"> Elementary</span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">storage</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  use archetype</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Lib</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  use list</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">List </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> L</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">storage </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mutable</span><span class="token plain"> str </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> arstring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mutable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">ops </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> L</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">list operation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mutable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">balance </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tez</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">transferred </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tez</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">caller </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">source </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">now </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> date</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">chainid </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> chain</span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">selfaddress </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> by </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    str </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">ops </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> L</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Nil</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">balance </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">transferred </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">caller </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">source </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">now </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">chainid </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">selfaddress </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">entry </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> None</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">tr </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> L</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Nil</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> ref </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">s </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">storage</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">end</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">module</span><span class="token plain"> Elementary</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  use archetype</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">Lib</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">  use Js</span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">storage</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> default </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> arstring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> unit</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#F8F8F2"><span class="token plain">  ensures </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token operator" style="color:rgb(137, 221, 255)">@</span><span class="token plain">expl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">str </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> v</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">_</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">str </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;-</span><span class="token plain"> v</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">end</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><code>Elementary_storage</code> defines the contract storage and all variables available to entrypoints (<code>caller</code>, <code>transferred</code>, ...). <code>Elementary</code> defines entrypoints and their postconditions.</p><p>The postcondition <code>p</code> is declared in whyml with the <code>ensures</code> keyword.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/edukera/completium-landing/tree/master/docs/contract/contract4.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/contract/test-scenario"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Test Scenario</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#benefit" class="table-of-contents__link">Benefit</a></li><li><a href="#limits" class="table-of-contents__link">Limits</a></li><li><a href="#tools" class="table-of-contents__link">Tools</a></li><li><a href="#archetype" class="table-of-contents__link">Archetype</a><ul><li><a href="#specification-language" class="table-of-contents__link">Specification language</a></li><li><a href="#whyml" class="table-of-contents__link">Whyml</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/dapp-first">First Dapp</a></li><li class="footer__item"><a class="footer__link-item" href="/dapps">DApps</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contract">Smart Contract</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/templates">Contract Templates</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/cli">CLI</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/dapp-tools/">Technical Stack</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://archetype-lang.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Archetype</a></li><li class="footer__item"><a href="https://www.edukera.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Edukera</a></li><li class="footer__item"><a href="https://github.com/edukera/completium-landing" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Edukera, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.822531e8.js"></script>
<script src="/runtime~main.81e5ce41.js"></script>
<script src="/main.18df72ca.js"></script>
<script src="/common.6be7b9dd.js"></script>
<script src="/2.99f15d99.js"></script>
<script src="/160.07a38516.js"></script>
<script src="/161.da0512e0.js"></script>
<script src="/935f2afb.b2db7189.js"></script>
<script src="/155.f85b55ee.js"></script>
<script src="/4c2e1947.ced1d79d.js"></script>
</body>
</html>