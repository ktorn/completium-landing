(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{216:function(e,n,r){"use strict";r.r(n),r.d(n,"frontMatter",(function(){return K})),r.d(n,"metadata",(function(){return J})),r.d(n,"toc",(function(){return Y})),r.d(n,"default",(function(){return Q}));var t=r(3),a=r(7),i=r(0),o=r.n(i),l=r(224),p=r(225),s=r(245),m=r(246),c=r(360),d=r(362),g=r(589),D=r(363),b=r(576),I=r(531),P=r(574),U=r(394),u=r(530);const[G,O,f,N,A,h]=Object(U.a)((function({appName:e}){const[{wallet:n,tezos:r,accountPkh:t},a]=o.a.useState((()=>({wallet:null,tezos:null,accountPkh:null}))),i=Boolean(r);o.a.useEffect((()=>u.a.onAvailabilityChange((n=>{a({wallet:n?new u.a(e):null,tezos:null,accountPkh:null})}))),[a,e]);const l=o.a.useCallback((async(e,r)=>{try{if(!n)throw new Error("Thanos Wallet not available");await n.connect(e,r);const t=n.toTezos(),i=await t.wallet.pkh();a({wallet:n,tezos:t,accountPkh:i})}catch(t){alert(`Failed to connect ThanosWallet: ${t.message}`)}}),[a,n]);return{wallet:n,tezos:r,accountPkh:t,ready:i,connect:l}}),(e=>e.wallet),(e=>e.tezos),(e=>e.accountPkh),(e=>e.ready),(e=>e.connect));var E=r(594),j=r(591),w=r(301);const[S,T]=Object(U.a)((function(){const[e,n]=Object(i.useState)({show:!1,severity:"info",msg:""});return{snackState:e,setInfoSnack:e=>{n({show:!0,severity:"info",msg:e})},setErrorSnack:e=>{n({show:!0,severity:"error",msg:e})},hideSnack:()=>{n((e=>({...e,show:!1})))}}}));function _(e){return o.a.createElement(j.a,Object(t.a)({elevation:6,variant:"filled"},e))}var v=()=>{const{snackState:e}=T();Object(w.a)();return o.a.createElement(E.a,{open:e.show},o.a.createElement(_,{severity:e.severity},e.msg))};var R=r(582);var y=e=>{const n=Object(w.a)(),r=A(),t=O(),a=h(),i=o.a.useCallback((e=>async()=>{try{await a(e?"mainnet":"edo2net")}catch(n){alert(n.message)}}),[a]);return r?o.a.createElement("div",null):t?o.a.createElement(b.a,{variant:"outlined",color:n.palette.text.primary,onClick:i(e.main)},"connect to wallet"):o.a.createElement(R.a,{href:"https://templewallet.com/",rel:"noopener",underline:"none"},o.a.createElement(b.a,{variant:"contained",disableElevation:!0,style:{backgroundColor:"#ed8936",color:"white",fontWeight:"bold"}},"install Temple"))};const F=[{prim:"storage",args:[{prim:"pair",args:[{prim:"nat",annots:["%totalsupply"]},{prim:"pair",args:[{prim:"big_map",args:[{prim:"pair",args:[{prim:"address"},{prim:"address"}]},{prim:"nat"}],annots:["%allowance"]},{prim:"big_map",args:[{prim:"address"},{prim:"nat"}],annots:["%ledger"]}]}]}]},{prim:"parameter",args:[{prim:"or",args:[{prim:"pair",args:[{prim:"pair",args:[{prim:"address",annots:["%owner"]},{prim:"address",annots:["%spender"]}]},{prim:"contract",args:[{prim:"nat"}]}],annots:["%getAllowance"]},{prim:"or",args:[{prim:"pair",args:[{prim:"address",annots:["%owner"]},{prim:"contract",args:[{prim:"nat"}]}],annots:["%getBalance"]},{prim:"or",args:[{prim:"pair",args:[{prim:"unit"},{prim:"contract",args:[{prim:"nat"}]}],annots:["%getTotalSupply"]},{prim:"or",args:[{prim:"pair",args:[{prim:"address",annots:["%from"]},{prim:"pair",args:[{prim:"address",annots:["%to"]},{prim:"nat",annots:["%value"]}]}],annots:["%transfer"]},{prim:"pair",args:[{prim:"address",annots:["%spender"]},{prim:"nat",annots:["%value"]}],annots:["%approve"]}]}]}]}]}]},{prim:"code",args:[[{prim:"NIL",args:[{prim:"operation"}]},{prim:"DIG",args:[{int:"1"}]},{prim:"UNPAIR"},{prim:"DIP",args:[{int:"1"},[{prim:"UNPAIR"},{prim:"SWAP"},{prim:"UNPAIR"},{prim:"SWAP"}]]},{prim:"IF_LEFT",args:[[{prim:"UNPAIR"},{prim:"UNPAIR"},{prim:"SWAP"},{prim:"DIG",args:[{int:"6"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"7"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"AMOUNT"},{prim:"DIG",args:[{int:"7"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"8"}]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"DIG",args:[{int:"6"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"7"}]},{prim:"PAIR"},{prim:"GET"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"GetNoneValue"}]},{prim:"FAILWITH"}],[]]},{prim:"TRANSFER_TOKENS"},{prim:"CONS"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"6"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"6"}]},{prim:"DROP",args:[{int:"3"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}],[{prim:"IF_LEFT",args:[[{prim:"UNPAIR"},{prim:"DIG",args:[{int:"5"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"6"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"AMOUNT"},{prim:"DIG",args:[{int:"5"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"6"}]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"MEM"},{prim:"IF",args:[[{prim:"DIG",args:[{int:"5"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"6"}]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"GET"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"GetNoneValue"}]},{prim:"FAILWITH"}],[]]}],[{prim:"PUSH",args:[{prim:"nat"},{int:"0"}]}]]},{prim:"TRANSFER_TOKENS"},{prim:"CONS"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"5"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"5"}]},{prim:"DROP",args:[{int:"2"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}],[{prim:"IF_LEFT",args:[[{prim:"UNPAIR"},{prim:"DROP",args:[{int:"1"}]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"DIG",args:[{int:"1"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"2"}]},{prim:"AMOUNT"},{prim:"DIG",args:[{int:"6"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"7"}]},{prim:"TRANSFER_TOKENS"},{prim:"CONS"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"4"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"4"}]},{prim:"DROP",args:[{int:"1"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}],[{prim:"IF_LEFT",args:[[{prim:"UNPAIR"},{prim:"SWAP"},{prim:"UNPAIR"},{prim:"SWAP"},{prim:"DUP"},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"GET"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"GetNoneValue"}]},{prim:"FAILWITH"}],[]]},{prim:"COMPARE"},{prim:"GE"},{prim:"NOT"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"NotEnoughBalance"}]},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"SENDER"},{prim:"COMPARE"},{prim:"NEQ"},{prim:"IF",args:[[{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"SENDER"},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"PAIR"},{prim:"GET"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"GetNoneValue"}]},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"1"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"2"}]},{prim:"DIG",args:[{int:"1"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"2"}]},{prim:"COMPARE"},{prim:"LT"},{prim:"IF",args:[[{prim:"DUP"},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"PAIR"},{prim:"PUSH",args:[{prim:"string"},{string:"NotEnoughAllowance"}]},{prim:"PAIR"},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"5"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"6"}]},{prim:"SENDER"},{prim:"DIG",args:[{int:"5"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"6"}]},{prim:"PAIR"},{prim:"GET"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"GetNoneValue"}]},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"6"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"7"}]},{prim:"PUSH",args:[{prim:"int"},{int:"0"}]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"INT"},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"SUB"},{prim:"COMPARE"},{prim:"GE"},{prim:"IF",args:[[{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"INT"},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"SUB"},{prim:"ABS"}],[{prim:"PUSH",args:[{prim:"string"},{string:"AssignNat"}]},{prim:"FAILWITH"}]]},{prim:"SOME"},{prim:"SENDER"},{prim:"DIG",args:[{int:"7"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"8"}]},{prim:"PAIR"},{prim:"UPDATE"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"6"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"6"}]},{prim:"DROP",args:[{int:"2"}]}],[]]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"GET"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"GetNoneValue"}]},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"PUSH",args:[{prim:"int"},{int:"0"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"INT"},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"SUB"},{prim:"COMPARE"},{prim:"GE"},{prim:"IF",args:[[{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"INT"},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"SUB"},{prim:"ABS"}],[{prim:"PUSH",args:[{prim:"string"},{string:"AssignNat"}]},{prim:"FAILWITH"}]]},{prim:"SOME"},{prim:"DIG",args:[{int:"5"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"6"}]},{prim:"UPDATE"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"4"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"4"}]},{prim:"DROP",args:[{int:"1"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"MEM"},{prim:"IF",args:[[{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"GET"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"GetNoneValue"}]},{prim:"FAILWITH"}],[]]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"ADD"},{prim:"SOME"},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"UPDATE"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"4"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"4"}]},{prim:"DROP",args:[{int:"1"}]}],[{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"MEM"},{prim:"IF",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"KeyAlreadyExists"}]},{prim:"FAILWITH"}],[{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"DIG",args:[{int:"1"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"2"}]},{prim:"PUSH",args:[{prim:"nat"},{int:"0"}]},{prim:"ADD"},{prim:"SOME"},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"UPDATE"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"3"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"3"}]}]]}]]},{prim:"DROP",args:[{int:"3"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}],[{prim:"UNPAIR"},{prim:"SWAP"},{prim:"DIG",args:[{int:"1"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"2"}]},{prim:"SENDER"},{prim:"PAIR"},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"DIG",args:[{int:"1"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"2"}]},{prim:"MEM"},{prim:"IF",args:[[{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"DIG",args:[{int:"1"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"2"}]},{prim:"GET"},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"GetNoneValue"}]},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"nat"},{int:"0"}]},{prim:"DIG",args:[{int:"3"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"4"}]},{prim:"COMPARE"},{prim:"GT"},{prim:"PUSH",args:[{prim:"nat"},{int:"0"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"COMPARE"},{prim:"GT"},{prim:"AND"},{prim:"IF",args:[[{prim:"DUP"},{prim:"PUSH",args:[{prim:"string"},{string:"UnsafeAllowanceChange"}]},{prim:"PAIR"},{prim:"FAILWITH"}],[]]},{prim:"DROP",args:[{int:"1"}]}],[]]},{prim:"DIG",args:[{int:"4"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"5"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"SOME"},{prim:"DIG",args:[{int:"2"}]},{prim:"DUP"},{prim:"DUG",args:[{int:"3"}]},{prim:"UPDATE"},{prim:"DIP",args:[{int:"1"},[{prim:"DIG",args:[{int:"4"}]},{prim:"DROP",args:[{int:"1"}]}]]},{prim:"DUG",args:[{int:"4"}]},{prim:"DROP",args:[{int:"3"}]},{prim:"SWAP"},{prim:"PAIR"},{prim:"SWAP"},{prim:"PAIR"},{prim:"DIG",args:[{int:"1"}]},{prim:"PAIR"}]]}]]}]]}]]}]]}],C=(e,n)=>({prim:"Pair",args:[{int:n.toString()},{prim:"Pair",args:[[],[{prim:"Elt",args:[{string:e},{int:n.toString()}]}]]}]});var k=r(596),H=r(593),W=r(584),M=r(583),L=r(521),x=r.n(L);const B=e=>{const n=n=>{e.setMain(n.target.checked)};if(A()){const e=N();return o.a.createElement(d.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},o.a.createElement(D.a,{variant:"subtitle2"},"Connected with:"),o.a.createElement(D.a,{variant:"subtitle2",style:{fontFamily:"Courier Prime, monospace"}},e))}return o.a.createElement(d.a,{container:!0},o.a.createElement(d.a,{item:!0,xs:8},o.a.createElement(y,{main:e.main})),o.a.createElement(d.a,{item:!0,xs:2},o.a.createElement(k.a,{checked:e.main,onChange:n,name:"checkedB",color:"primary"})),o.a.createElement(d.a,{item:!0,xs:2},o.a.createElement(D.a,{variant:"subtitle2",style:{marginTop:"8px"}},"Mainnet")))};const z=e=>o.a.createElement(d.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},o.a.createElement(D.a,{variant:"subtitle2"},"Contract available at:"),o.a.createElement(D.a,{component:p.a,to:"https://better-call.dev/"+(e.main?"mainnet":"edo2net")+"/"+e.contract+"/operations",variant:"subtitle2",style:{fontFamily:"Courier Prime, monospace"}},e.contract)),V=()=>{const[e,n]=o.a.useState(""),[r,t]=o.a.useState(1e7),[a,i]=o.a.useState(""),[l,p]=o.a.useState(!1),[s,m]=o.a.useState("CMPL"),[I,P]=o.a.useState("Completium Token"),[U,u]=o.a.useState(0),[G,O]=o.a.useState("https://github.com/edukera/completium-landing/blob/master/static/img/favicon.ico"),[N,h]=o.a.useState(!1),{setInfoSnack:E,setErrorSnack:j,hideSnack:w}=T(),S=f(),_=A(),v=()=>{return e.length>0&(36!==(n=e).length|!n.startsWith("tz1"));var n},R=()=>!(Math.round(r)==r&r>0);return o.a.createElement(c.a,{style:{backgroundColor:"transparent",border:"1px solid #606770",marginTop:"20px",marginBottom:"20px"},raised:!1},o.a.createElement(d.a,{container:!0,style:{padding:22},spacing:3},o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement(g.a,{onChange:e=>{n(e.target.value)},value:e,variant:"outlined",color:"primary",fullWidth:!0,required:!0,id:"initalholder",label:"Initial Holder",error:v(),helperText:v()?"Invalid address format":""})),o.a.createElement(d.a,{item:!0,xs:6,style:{textAlign:"center",marginTop:"10px"}},o.a.createElement(B,{main:N,setMain:h})),o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement(g.a,{type:"number",onChange:e=>{t(e.target.value)},error:R(),helperText:R()?"Invalid Natural Integer":"",value:r,variant:"outlined",color:"primary",fullWidth:!0,required:!0,id:"totalsupply",label:"Total Supply"})),o.a.createElement(d.a,{item:!0,xs:6,style:{textAlign:"center",marginTop:"10px"}},""!==a?o.a.createElement(z,{contract:a,main:N}):o.a.createElement(b.a,{variant:"contained",color:"primary",disableElevation:!0,disabled:!_|R()|v()|0==e.length,onClick:async()=>{try{const n=await S.wallet.originate({code:F,init:C(e,r)}).send(),t=n.opHash.substring(0,10)+"...";E(`waiting for ${t} to be confirmed ...`);const a=await n.contract();w(),console.log(`Origination completed for ${a.address}.`),setTimeout((()=>i(a.address)),5e3)}catch(n){console.log(n),j(n.message),setTimeout(w,4e3)}}},"originate"))),o.a.createElement(H.a,{expanded:l,onChange:(e,n)=>{p(n)},style:{backgroundColor:"transparent"}},o.a.createElement(M.a,{expandIcon:o.a.createElement(x.a,null),"aria-controls":"panel4bh-content",id:"panel4bh-header"},o.a.createElement(D.a,{style:{marginLeft:"10px"}},"Metadata")),o.a.createElement(W.a,null,o.a.createElement(d.a,{container:!0,spacing:3,style:{marginLeft:"0px"}},o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement(g.a,{onChange:e=>{m(e.target.value)},error:!1,helperText:"Token symbol, like 'USD' for United States Dollar.",value:s,variant:"outlined",color:"primary",fullWidth:!0,required:!0,id:"symbol",label:"Symbol"})),o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement(g.a,{onChange:e=>{P(e.target.value)},error:!1,helperText:"Token name, like 'Bitcoin' for BTC asset.",value:I,variant:"outlined",color:"primary",fullWidth:!0,required:!0,id:"name",label:"Name"})),o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement(g.a,{type:"number",onChange:e=>{u(e.target.value)},error:!1,helperText:"A number of decimal places after point.",value:U,variant:"outlined",color:"primary",fullWidth:!0,required:!0,id:"decimals",label:"Decimals"})),o.a.createElement(d.a,{item:!0,xs:6},o.a.createElement(g.a,{onChange:e=>{O(e.target.value)},error:!1,helperText:"Image URL for token logo.",value:G,variant:"outlined",color:"primary",fullWidth:!0,required:!0,id:"url",label:"Icon URL"}))))))};var q=e=>{const n=o.a.useMemo((()=>Object(I.a)({palette:{type:"dark",primary:{light:"#1dc5ff",main:"#00ACE7",dark:"#0a90bf",contrastText:"#fff"}}})),[!0]);return o.a.createElement(G,{appName:"Completium FA 1.2"},o.a.createElement(S,null,o.a.createElement(P.a,{theme:n},o.a.createElement(V,null),o.a.createElement(v,null))))},K={id:"template1",title:"FA 1.2",sidebar_label:"FA 1.2",slug:"/templates/fa12"},J={unversionedId:"templates/template1",id:"templates/template1",isDocsHomePage:!1,title:"FA 1.2",description:"Introduction",source:"@site/docs/templates/template1.md",slug:"/templates/fa12",permalink:"/docs/templates/fa12",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/templates/template1.md",version:"current",sidebar_label:"FA 1.2",sidebar:"templates",previous:{title:"Presentation",permalink:"/docs/templates"},next:{title:"ERC20",permalink:"/docs/templates/erc20"}},Y=[{value:"Introduction",id:"introduction",children:[]},{value:"API",id:"api",children:[{value:"Storage",id:"storage",children:[]},{value:"Entrypoints",id:"entrypoints",children:[]}]},{value:"Originate",id:"originate",children:[]},{value:"Code",id:"code",children:[]}],$={toc:Y};function Q(e){var n=e.components,r=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(t.a)({},$,r,{components:n,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"introduction"},"Introduction"),Object(l.b)("p",null,"A fungible token is basically an association table between the token owner (the account address) and the amount of tokens (a natural integer). It is possible to allow another account to transfer tokens on your behalf."),Object(l.b)("p",null,"This contract follows the ",Object(l.b)("a",{href:"https://assets.tqtezos.com/docs/token-contracts/fa12/1-fa12-intro/"},"Financial Asset 1.2")," (FA 1.2) ",Object(l.b)("a",{href:"https://gitlab.com/tzip/tzip/blob/master/proposals/tzip-7/tzip-7.md"},"TZIP 7")," specification for fungible token on Tezos."),Object(l.b)("h2",{id:"api"},"API"),Object(l.b)("h3",{id:"storage"},"Storage"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"Name"),Object(l.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"Type"),Object(l.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"Desc"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"totalsupply")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"nat")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Total number of tokens.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"ledger")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"collection")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Association between token holder and number of tokens.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"allowance")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"collection")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Association between the pair owner and spender and the allowed amount.")))),Object(l.b)("h3",{id:"entrypoints"},"Entrypoints"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"Name"),Object(l.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"Parameters"),Object(l.b)("th",Object(t.a)({parentName:"tr"},{align:null}),"Desc"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"transfer")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"from"),", ",Object(l.b)("inlineCode",{parentName:"td"},"to"),", ",Object(l.b)("inlineCode",{parentName:"td"},"value")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Transfers ",Object(l.b)("inlineCode",{parentName:"td"},"value")," tokens from ",Object(l.b)("inlineCode",{parentName:"td"},"from")," to ",Object(l.b)("inlineCode",{parentName:"td"},"to"),". If the ",Object(l.b)("em",{parentName:"td"},"caller")," is not equal to ",Object(l.b)("inlineCode",{parentName:"td"},"from"),", then ",Object(l.b)("em",{parentName:"td"},"caller")," must have been allowed by ",Object(l.b)("inlineCode",{parentName:"td"},"from")," to transfer this amount to ",Object(l.b)("inlineCode",{parentName:"td"},"to"),".")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"approve")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"spender"),", ",Object(l.b)("inlineCode",{parentName:"td"},"value")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Approves ",Object(l.b)("inlineCode",{parentName:"td"},"spender")," to transfer ",Object(l.b)("inlineCode",{parentName:"td"},"value")," tokens from ",Object(l.b)("em",{parentName:"td"},"caller"),".")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"getAllowance")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"owner"),", ",Object(l.b)("inlineCode",{parentName:"td"},"spender")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Getter for the allowed value for ",Object(l.b)("inlineCode",{parentName:"td"},"owner")," and ",Object(l.b)("inlineCode",{parentName:"td"},"spender"),".")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"getBalance")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"owner")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Getter for the number of tokens owned by ",Object(l.b)("inlineCode",{parentName:"td"},"owner"),".")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"getTotalSupply")),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null})),Object(l.b)("td",Object(t.a)({parentName:"tr"},{align:null}),"Getter for ",Object(l.b)("inlineCode",{parentName:"td"},"totalsupply"))))),Object(l.b)("h2",{id:"originate"},"Originate"),Object(l.b)("p",null,"Originate a FA 1.2 contract with the widget below."),Object(l.b)("p",null,'Click "Connect to Wallet" button, fill the fields "Initial Holder" and "Total Supply", and click "Originate".'),Object(l.b)(q,{mdxType:"Deploy"}),Object(l.b)("p",null,"Originate the contract from ",Object(l.b)("a",{href:"https://archetype-lang.org/"},"Archetype")," code below with the following ",Object(l.b)(p.a,{to:"/docs/cli",mdxType:"Link"},"Completium CLI")," example command:"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{}),"completium-cli deploy fa12.arl --init '(@tz1LLJ3nxbpGGMLmjzcp9sTMYui87tycG6nG, 10_000_000)'\n")),Object(l.b)("p",null,"The command sets:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"initialholder")," constant to ",Object(l.b)("inlineCode",{parentName:"li"},"tz1LLJ3nxbpGGMLmjzcp9sTMYui87tycG6nG")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("inlineCode",{parentName:"li"},"totalsupply")," variable to 10 millions")),Object(l.b)("h2",{id:"code"},"Code"),Object(l.b)("p",null,"The ",Object(l.b)(p.a,{to:"/docs/contract/programming-language#micheslon",mdxType:"Link"},"Michelson")," code is generated with version 1.2.3 of Archetype."),Object(l.b)("div",{className:"admonition admonition-info alert alert--info"},Object(l.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(t.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(t.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(t.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(l.b)("div",Object(t.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("p",{parentName:"div"},"The Archetype FA 1.2 code has been ",Object(l.b)(p.a,{to:"https://assets.tqtezos.com/docs/token-contracts/fa12/4-fa12-archetype/",mdxType:"Link"},"verified")," towards the formal specification presented below."))),Object(l.b)(s.a,{defaultValue:"archetype",values:[{label:"Archetype",value:"archetype"},{label:"Michelson",value:"michelson"},{label:"Specification",value:"specification"}],mdxType:"Tabs"},Object(l.b)(m.a,{value:"archetype",mdxType:"TabItem"},Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype"}),'archetype fa12(const initialholder: address, totalsupply : nat)\n\nasset allowance identified by addr_owner addr_spender to big_map {\n  addr_owner       : address;\n  addr_spender     : address;\n  amount           : nat;\n}\n\nasset ledger identified by holder to big_map {\n  holder     : address;\n  tokens     : nat = 0;\n} initialized by {\n  { holder = initialholder; tokens = totalsupply }\n}\n\nentry %transfer (%from : address, %to : address, value : nat) {\n  require {\n    r1 otherwise "NotEnoughBalance" : ledger[%from].tokens >= value;\n  }\n  effect {\n    if caller <> %from then (\n      var current = allowance[(%from, caller)].amount;\n      dofailif(current < value, ("NotEnoughAllowance", ((value, current))));\n      allowance.update((%from, caller), { amount -=  value });\n    );\n    ledger.update(%from, { tokens -= value });\n    ledger.addupdate(%to, { tokens += value });\n  }\n}\n\nentry approve(spender : address, value : nat) {\n  var k = (caller, spender);\n  if allowance.contains(k) then (\n    var previous = allowance[k].amount;\n    dofailif(previous > 0 and value > 0, (("UnsafeAllowanceChange", previous)));\n  );\n  allowance.addupdate( k, { amount = value });\n}\n\ngetter getAllowance (owner : address, spender : address) : nat {\n  return (allowance[(owner, spender)].amount)\n}\n\ngetter getBalance (owner : address) : nat {\n  return (if (ledger.contains(owner)) then ledger[owner].tokens else 0)\n}\n\ngetter getTotalSupply () : nat {\n  return totalsupply\n}\n'))),Object(l.b)(m.a,{value:"michelson",mdxType:"TabItem"},Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),'# (Pair 10000000 (Pair {  } { Elt "tz1LLJ3nxbpGGMLmjzcp9sTMYui87tycG6nG" 10000000 }))\n{\n  storage (pair (nat %totalsupply) (pair (big_map %allowance (pair address address) nat) (big_map %ledger address nat)));\n  parameter (or (pair %getAllowance (pair (address %owner) (address %spender)) (contract nat)) (or (pair %getBalance (address %owner) (contract nat)) (or (pair %getTotalSupply unit (contract nat)) (or (pair %transfer (address %from) (pair (address %to) (nat %value))) (pair %approve (address %spender) (nat %value))))));\n  code { NIL operation;\n         DIG 1;\n         UNPAIR;\n         DIP { UNPAIR; SWAP; UNPAIR; SWAP };\n         IF_LEFT\n           { UNPAIR;\n             UNPAIR;\n             SWAP;\n             DIG 6;\n             DUP;\n             DUG 7;\n             DIG 3;\n             DUP;\n             DUG 4;\n             AMOUNT;\n             DIG 7;\n             DUP;\n             DUG 8;\n             DIG 4;\n             DUP;\n             DUG 5;\n             DIG 6;\n             DUP;\n             DUG 7;\n             PAIR;\n             GET;\n             IF_NONE\n               { PUSH string "GetNoneValue";\n                 FAILWITH }\n               {  };\n             TRANSFER_TOKENS;\n             CONS;\n             DIP { DIG 6; DROP };\n             DUG 6;\n             DROP 3;\n             SWAP;\n             PAIR;\n             SWAP;\n             PAIR;\n             DIG 1;\n             PAIR }\n           { IF_LEFT\n               { UNPAIR;\n                 DIG 5;\n                 DUP;\n                 DUG 6;\n                 DIG 2;\n                 DUP;\n                 DUG 3;\n                 AMOUNT;\n                 DIG 5;\n                 DUP;\n                 DUG 6;\n                 DIG 4;\n                 DUP;\n                 DUG 5;\n                 MEM;\n                 IF\n                   { DIG 5;\n                     DUP;\n                     DUG 6;\n                     DIG 4;\n                     DUP;\n                     DUG 5;\n                     GET;\n                     IF_NONE\n                       { PUSH string "GetNoneValue";\n                         FAILWITH }\n                       {  } }\n                   { PUSH nat 0 };\n                 TRANSFER_TOKENS;\n                 CONS;\n                 DIP { DIG 5; DROP };\n                 DUG 5;\n                 DROP 2;\n                 SWAP;\n                 PAIR;\n                 SWAP;\n                 PAIR;\n                 DIG 1;\n                 PAIR }\n               { IF_LEFT\n                   { UNPAIR;\n                     DROP;\n                     DIG 4;\n                     DUP;\n                     DUG 5;\n                     DIG 1;\n                     DUP;\n                     DUG 2;\n                     AMOUNT;\n                     DIG 6;\n                     DUP;\n                     DUG 7;\n                     TRANSFER_TOKENS;\n                     CONS;\n                     DIP { DIG 4; DROP };\n                     DUG 4;\n                     DROP;\n                     SWAP;\n                     PAIR;\n                     SWAP;\n                     PAIR;\n                     DIG 1;\n                     PAIR }\n                   { IF_LEFT\n                       { UNPAIR;\n                         SWAP;\n                         UNPAIR;\n                         SWAP;\n                         DUP;\n                         DIG 4;\n                         DUP;\n                         DUG 5;\n                         DIG 4;\n                         DUP;\n                         DUG 5;\n                         GET;\n                         IF_NONE\n                           { PUSH string "GetNoneValue";\n                             FAILWITH }\n                           {  };\n                         COMPARE;\n                         GE;\n                         NOT;\n                         IF\n                           { PUSH string "NotEnoughBalance";\n                             FAILWITH }\n                           {  };\n                         DIG 2;\n                         DUP;\n                         DUG 3;\n                         SENDER;\n                         COMPARE;\n                         NEQ;\n                         IF\n                           { DIG 4;\n                             DUP;\n                             DUG 5;\n                             SENDER;\n                             DIG 4;\n                             DUP;\n                             DUG 5;\n                             PAIR;\n                             GET;\n                             IF_NONE\n                               { PUSH string "GetNoneValue";\n                                 FAILWITH }\n                               {  };\n                             DIG 1;\n                             DUP;\n                             DUG 2;\n                             DIG 1;\n                             DUP;\n                             DUG 2;\n                             COMPARE;\n                             LT;\n                             IF\n                               { DUP;\n                                 DIG 2;\n                                 DUP;\n                                 DUG 3;\n                                 PAIR;\n                                 PUSH string "NotEnoughAllowance";\n                                 PAIR;\n                                 FAILWITH }\n                               {  };\n                             DIG 5;\n                             DUP;\n                             DUG 6;\n                             SENDER;\n                             DIG 5;\n                             DUP;\n                             DUG 6;\n                             PAIR;\n                             GET;\n                             IF_NONE\n                               { PUSH string "GetNoneValue";\n                                 FAILWITH }\n                               {  };\n                             DIG 6;\n                             DUP;\n                             DUG 7;\n                             PUSH int 0;\n                             DIG 4;\n                             DUP;\n                             DUG 5;\n                             INT;\n                             DIG 3;\n                             DUP;\n                             DUG 4;\n                             SUB;\n                             COMPARE;\n                             GE;\n                             IF\n                               { DIG 3;\n                                 DUP;\n                                 DUG 4;\n                                 INT;\n                                 DIG 2;\n                                 DUP;\n                                 DUG 3;\n                                 SUB;\n                                 ABS }\n                               { PUSH string "AssignNat";\n                                 FAILWITH };\n                             SOME;\n                             SENDER;\n                             DIG 7;\n                             DUP;\n                             DUG 8;\n                             PAIR;\n                             UPDATE;\n                             DIP { DIG 6; DROP };\n                             DUG 6;\n                             DROP 2 }\n                           {  };\n                         DIG 3;\n                         DUP;\n                         DUG 4;\n                         DIG 3;\n                         DUP;\n                         DUG 4;\n                         GET;\n                         IF_NONE\n                           { PUSH string "GetNoneValue";\n                             FAILWITH }\n                           {  };\n                         DIG 4;\n                         DUP;\n                         DUG 5;\n                         PUSH int 0;\n                         DIG 3;\n                         DUP;\n                         DUG 4;\n                         INT;\n                         DIG 3;\n                         DUP;\n                         DUG 4;\n                         SUB;\n                         COMPARE;\n                         GE;\n                         IF\n                           { DIG 2;\n                             DUP;\n                             DUG 3;\n                             INT;\n                             DIG 2;\n                             DUP;\n                             DUG 3;\n                             SUB;\n                             ABS }\n                           { PUSH string "AssignNat";\n                             FAILWITH };\n                         SOME;\n                         DIG 5;\n                         DUP;\n                         DUG 6;\n                         UPDATE;\n                         DIP { DIG 4; DROP };\n                         DUG 4;\n                         DROP;\n                         DIG 3;\n                         DUP;\n                         DUG 4;\n                         DIG 2;\n                         DUP;\n                         DUG 3;\n                         MEM;\n                         IF\n                           { DIG 3;\n                             DUP;\n                             DUG 4;\n                             DIG 2;\n                             DUP;\n                             DUG 3;\n                             GET;\n                             IF_NONE\n                               { PUSH string "GetNoneValue";\n                                 FAILWITH }\n                               {  };\n                             DIG 4;\n                             DUP;\n                             DUG 5;\n                             DIG 2;\n                             DUP;\n                             DUG 3;\n                             DIG 2;\n                             DUP;\n                             DUG 3;\n                             ADD;\n                             SOME;\n                             DIG 4;\n                             DUP;\n                             DUG 5;\n                             UPDATE;\n                             DIP { DIG 4; DROP };\n                             DUG 4;\n                             DROP }\n                           { DIG 3;\n                             DUP;\n                             DUG 4;\n                             DIG 2;\n                             DUP;\n                             DUG 3;\n                             MEM;\n                             IF\n                               { PUSH string "KeyAlreadyExists";\n                                 FAILWITH }\n                               { DIG 3;\n                                 DUP;\n                                 DUG 4;\n                                 DIG 1;\n                                 DUP;\n                                 DUG 2;\n                                 PUSH nat 0;\n                                 ADD;\n                                 SOME;\n                                 DIG 3;\n                                 DUP;\n                                 DUG 4;\n                                 UPDATE;\n                                 DIP { DIG 3; DROP };\n                                 DUG 3 } };\n                         DROP 3;\n                         SWAP;\n                         PAIR;\n                         SWAP;\n                         PAIR;\n                         DIG 1;\n                         PAIR }\n                       { UNPAIR;\n                         SWAP;\n                         DIG 1;\n                         DUP;\n                         DUG 2;\n                         SENDER;\n                         PAIR;\n                         DIG 4;\n                         DUP;\n                         DUG 5;\n                         DIG 1;\n                         DUP;\n                         DUG 2;\n                         MEM;\n                         IF\n                           { DIG 4;\n                             DUP;\n                             DUG 5;\n                             DIG 1;\n                             DUP;\n                             DUG 2;\n                             GET;\n                             IF_NONE\n                               { PUSH string "GetNoneValue";\n                                 FAILWITH }\n                               {  };\n                             PUSH nat 0;\n                             DIG 3;\n                             DUP;\n                             DUG 4;\n                             COMPARE;\n                             GT;\n                             PUSH nat 0;\n                             DIG 2;\n                             DUP;\n                             DUG 3;\n                             COMPARE;\n                             GT;\n                             AND;\n                             IF\n                               { DUP;\n                                 PUSH string "UnsafeAllowanceChange";\n                                 PAIR;\n                                 FAILWITH }\n                               {  };\n                             DROP }\n                           {  };\n                         DIG 4;\n                         DUP;\n                         DUG 5;\n                         DIG 2;\n                         DUP;\n                         DUG 3;\n                         SOME;\n                         DIG 2;\n                         DUP;\n                         DUG 3;\n                         UPDATE;\n                         DIP { DIG 4; DROP };\n                         DUG 4;\n                         DROP 3;\n                         SWAP;\n                         PAIR;\n                         SWAP;\n                         PAIR;\n                         DIG 1;\n                         PAIR } } } } };\n}\n'))),Object(l.b)(m.a,{value:"specification",mdxType:"TabItem"},Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype"}),'specification {\n  s1: ledger.sum(tokens) = totalsupply;\n}\n\nspecification entry %transfer (%from : address, %to : address, value : nat) {\n  fails {\n    f0 with (msg : string) :\n      let some after_ledger_from = ledger[%from] in\n        msg = "NotEnoughBalance" and\n        after_ledger_from.tokens < value\n      otherwise true;\n    f1 with (msg : string * (nat * nat)) :\n      let some after_allowance_from_caller = allowance[(%from,caller)] in\n        msg = ("NotEnoughAllowance", ((value, after_allowance_from_caller.amount))) and\n        caller <> %from and\n        after_allowance_from_caller.amount < value\n      otherwise false;\n  }\n\n  (* LEDGER ASSET *)\n  postcondition transfer_p1 { (* effect on %from nbtokens *)\n    %from <> %to ->\n    let some before_ledger_from = before.ledger[%from] in\n    let some after_ledger_from  = ledger[%from] in\n    after_ledger_from = { before_ledger_from with\n      tokens = abs (before_ledger_from.tokens - value)\n    }\n    otherwise false otherwise false\n  }\n\n  postcondition transfer_p2 { (* effect on %to nbtokens *)\n    %from <> %to ->\n    let some after_ledger_to = ledger[%to] in\n    let some before_ledger_to = before.ledger[%to] in\n      after_ledger_to = { before_ledger_to with\n        tokens = (before_ledger_to.tokens + value)\n      }\n    otherwise\n      after_ledger_to = { holder = %to; tokens = value }\n    otherwise false (* %to ledger asset exists after transfer *) r\n  }\n\n  postcondition transfer_p3 {\n    %from = %to -> ledger = before.ledger\n  }\n\n  postcondition transfer_p4 { (* other ledger assets are unchanged *)\n    forall tokenholder in ledger,\n      tokenholder.holder <> %from ->\n      tokenholder.holder <> %to ->\n      before.ledger[tokenholder.holder] = some(tokenholder)\n  }\n\n  postcondition transfer_p5 { (* no ledger asset is removed *)\n    removed.ledger.isempty()\n  }\n\n  postcondition transfer_p6 { (* number of added asset may be one *)\n    let some before_to = before.ledger[%to] in\n      added.ledger.isempty()\n    otherwise\n      added.ledger = [ { holder = %to; tokens = value } ]\n  }\n\n  (* ALLOWANCE ASSET *)\n  postcondition transfer_p7 { (* effect on allowance *)\n    caller <> %from ->\n    let some before_from_caller = before.allowance[(%from,caller)] in\n    let some after_from_caller = allowance[(%from,caller)] in\n      before_from_caller.amount > value ->\n      after_from_caller = { before_from_caller with\n        amount = abs (before_from_caller.amount - value)\n      }\n    otherwise false\n    otherwise true\n  }\n\n  postcondition transfer_p8 { (* effect on allowance *)\n    caller = %from -> allowance = before.allowance\n  }\n\n  postcondition transfer_p9 { (* other allowance assets are unchanged *)\n    forall a in allowance,\n      a.addr_owner <> %from and a.addr_spender <> caller ->\n      before.allowance[(a.addr_owner, a.addr_spender)] = some(a)\n  }\n\n  postcondition transfer_p10 { (* no allowance is added or removed *)\n    removed.allowance.isempty() and added.allowance.isempty()\n  }\n\n  postcondition transfer_p11 { (* no operation generated *)\n    length (operations) = 0\n  }\n}\n\nspecification entry approve(spender : address, value : nat) {\n  fails {\n    f2 with (msg : (string * nat)) :\n      let some allowance_caller_spender = allowance[(caller, spender)] in\n        msg = ("UnsafeAllowanceChange", allowance_caller_spender.amount) and\n        value > 0 and\n        allowance_caller_spender.amount > 0\n      otherwise false;\n  }\n\n  postcondition approve_p1 { (* effect on allowance asset *)\n    let some after_allowance_caller_spender = allowance[(caller,spender)] in\n    let some before_allowance_caller_spender = before.allowance[(caller,spender)] in\n      after_allowance_caller_spender = { before_allowance_caller_spender with\n        amount = value\n      }\n    otherwise\n      after_allowance_caller_spender = { addr_owner = caller; addr_spender = spender; amount = value }\n    otherwise false\n  }\n\n  postcondition approve_p2 { (* other allowance assets are unchanged *)\n    forall a in allowance,\n      (a.addr_owner, a.addr_spender) <> (caller, spender) ->\n      before.allowance[(a.addr_owner, a.addr_spender)] = some(a)\n  }\n\n  postcondition approve_p3 { (* added allowance *)\n    let some allowance_caller_spender = before.allowance[(caller, spender)] in\n      added.allowance.isempty()\n    otherwise\n      added.allowance = [ { addr_owner = caller; addr_spender = spender; amount = value } ]\n  }\n\n  postcondition approve_p4 { (* no allowance asset is removed *)\n    removed.allowance.isempty()\n  }\n\n  postcondition approve_p5 {\n    ledger = before.ledger\n  }\n\n  postcondition approve_p6 { (*  no operation generated *)\n    length (operations) = 0\n  }\n}\n\nspecification getter getAllowance (owner : address, spender : address) {\n  postcondition getallowance_p1 { (* creates one op *)\n    length (operations) = 1\n  }\n\n  postcondition getallowance_p2 { (* assets are unchanged *)\n    ledger = before.ledger and allowance = before.allowance\n  }\n}\n\nspecification getter getBalance (owner : address) {\n  postcondition getbalance_p1 { (* creates one op *)\n    length (operations) = 1\n  }\n\n  postcondition getbalance_p2 { (* assets are unchanged *)\n    ledger = before.ledger and allowance = before.allowance\n  }\n}\n\nspecification getter getTotalSupply () {\n  postcondition gettotalsupply_p1 { (* creates one op *)\n    length (operations) = 1\n  }\n\n  postcondition gettotalsupply_p2 { (* assets are unchanged *)\n    ledger = before.ledger and allowance = before.allowance\n  }\n}\n')))))}Q.isMDXComponent=!0},421:function(e,n){},423:function(e,n){},492:function(e,n){},494:function(e,n){},507:function(e,n){},509:function(e,n){}}]);