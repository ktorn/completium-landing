(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{198:function(e,t,n){"use strict";n(0),n(202)},90:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return p})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return d})),n.d(t,"default",(function(){return b}));var a=n(3),o=n(7),i=(n(0),n(197)),c=(n(198),n(200)),r=(n(201),n(199)),p={id:"dex4",title:"Exchange",sidebar_label:"Exchange",slug:"/dapp-dex/exchange"},l={unversionedId:"dapp-dex/dex4",id:"dapp-dex/dex4",isDocsHomePage:!1,title:"Exchange",description:"From XTZ to city coin",source:"@site/docs/dapp-dex/dex4.md",slug:"/dapp-dex/exchange",permalink:"/docs/dapp-dex/exchange",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/dapp-dex/dex4.md",version:"current",sidebar_label:"Exchange",sidebar:"dex",previous:{title:"Use Case Presentation",permalink:"/docs/dapp-dex/presentation"},next:{title:"Liquidity",permalink:"/docs/dapp-dex/liquidity"}},d=[{value:"From XTZ to city coin",id:"from-xtz-to-city-coin",children:[]},{value:"From city coin to city coin",id:"from-city-coin-to-city-coin",children:[]}],s={toc:d};function b(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"from-xtz-to-city-coin"},"From XTZ to city coin"),Object(i.b)("p",null,"Your are going to London during the week end. You need to buy some London City Coin with XTZ (Tezos currency) to visit museums:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Select 'XTZ' currency"),Object(i.b)("li",{parentName:"ol"},"Enter the amount of XTZ to spend"),Object(i.b)("li",{parentName:"ol"},"Select 'XLD' token"),Object(i.b)("li",{parentName:"ol"},"Quantity of XLD to get in exchange of the XTZ amount")),Object(i.b)(c.a,{img:"dex-exchange1.png",width:"100%",mdxType:"DappFigure"}),Object(i.b)("p",null,"Click on the 'Exchange button'; the temple wallet popup is displayed:"),Object(i.b)(c.a,{img:"dex-exchange2.png",width:"50%",mdxType:"DappFigure"}),Object(i.b)("p",null,"The transaction parameter specifies a call to the smart contract's entry point ",Object(i.b)("inlineCode",{parentName:"p"},"exchange"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[{\n    "kind":"transaction"\n    "to":"KT1J48AfBi8NwNaFQM1AXTvordRgSRJxK313"\n    "amount":144000000\n    "mutez":true\n    "parameter":{\n        "entrypoint":"exchange"\n        "value":{\n            "prim":"Pair"\n            "args":[{\n                "string":"XTZ"\n            } {\n                "prim":"Pair"\n                "args":[{\n                    "int":"144000000"\n                } {\n                    "prim":"Pair"\n                    "args":[{\n                        "string":"XLD"\n                    } {\n                        "int":"661"\n                    }]\n                }]\n            }]\n        }\n    }\n}]\n')),Object(i.b)("p",null,"This will generate a sub-transaction from the DEX contract to XLD FA 1.2 contract (see ",Object(i.b)(r.a,{to:"/docs/dapp-dex",mdxType:"Link"},"DApp presentation"),")."),Object(i.b)("h2",{id:"from-city-coin-to-city-coin"},"From city coin to city coin"),Object(i.b)("p",null,"It is time to come back to Paris. Exchange the XLD tokens you have not spent to XPA tokens:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Select 'XLD' token"),Object(i.b)("li",{parentName:"ol"},"Enter the quantity of XLD tokens"),Object(i.b)("li",{parentName:"ol"},"Select 'XPA' token"),Object(i.b)("li",{parentName:"ol"},"Quantity of XPA to get in exchange of the XLD amount")),Object(i.b)(c.a,{img:"dex-exchange3.png",width:"100%",mdxType:"DappFigure"}),Object(i.b)("p",null,"Click on the 'Exchange button'; the temple wallet popup is displayed:"),Object(i.b)(c.a,{img:"dex-exchange4.png",width:"50%",mdxType:"DappFigure"}),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'[{\n    "kind":"transaction"\n    "to":"KT1H8JUiFbvEMycCuG5sZfCGHkN7vgfLAs3n"\n    "amount":0\n    "mutez":true\n    "parameter":{\n        "entrypoint":"approve"\n        "value":{\n            "prim":"Pair"\n            "args":[{\n                "string":"KT1J48AfBi8NwNaFQM1AXTvordRgSRJxK313"\n            } {\n                "int":"6"\n            }]\n        }\n    }\n} {\n    "kind":"transaction"\n    "to":"KT1J48AfBi8NwNaFQM1AXTvordRgSRJxK313"\n    "amount":0\n    "mutez":true\n    "parameter":{\n        "entrypoint":"exchange"\n        "value":{\n        "prim":"Pair"\n        "args":[{\n            "string":"XLD"\n        } {\n            "prim":"Pair"\n            "args":[{\n                "int":"6"\n            } {\n                "prim":"Pair"\n                "args":[{\n                    "string":"XPA"\n                } {\n                    "int":"16"\n                }]\n            }]\n        }]\n        }\n    }\n}]\n')),Object(i.b)("p",null,"We note that two transactions are generated:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"a call to the ",Object(i.b)("inlineCode",{parentName:"li"},"approve")," entry point of the XLD FA 1.2 smart contract to authorize the DEX to transfer XLD ownership"),Object(i.b)("li",{parentName:"ol"},"a call to the ",Object(i.b)("inlineCode",{parentName:"li"},"exchange")," entry point of the DEX smart contract")))}b.isMDXComponent=!0}}]);